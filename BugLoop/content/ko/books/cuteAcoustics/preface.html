<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>귀여운 음향학 서문</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
  <style>
    /* =========================================================
       Fonts: Pretendard 폰트 시스템 적용
       ========================================================= */
    @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.css');
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700;900&display=swap');

    :root{
      --font-sans: "Pretendard Variable", "Pretendard",
                   -apple-system, system-ui, "Segoe UI", Roboto, "Helvetica Neue", Arial,
                   "Noto Sans KR", "Noto Sans", sans-serif;
      --tracking-body: -0.003em;
      --lh-body:        1.55;
      --lh-heading:     1.25;
    }

    body {
      margin: 0;
      font-family: var(--font-sans);
      letter-spacing: var(--tracking-body);
      line-height: var(--lh-body);
      background: #f5f5f5;
      overflow: hidden; 
      transition: background 0.3s, color 0.3s;
      display: flex;
      flex-direction: column;
      height: 100vh;
      
      /* ✨ 수정: 모바일에서 세로 스크롤 및 덜컹거림 방지 */
      touch-action: pan-x; 
      overscroll-behavior-y: contain;
    }
    
    :lang(ko), .lang-ko {
      letter-spacing: -0.0020em;
    }

    body.dark {
      background: #121212;
      color: #f5f5f5;
    }
    
    /* =========================================================
       헤더 스타일 
       ========================================================= */
    .app-header {
        width: 100%;
        height: 50px; 
        background: #000; 
        color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 20px;
        box-sizing: border-box;
        position: relative;
        z-index: 50; 
    }
    
    .header-title {
        font-size: 18px;
        font-weight: 600;
        margin-left: 10px;
        letter-spacing: -0.01em;
    }
    
    .header-controls {
        display: flex;
        gap: 10px; 
    }
    
    /* 헤더 내 버튼 스타일 */
    .header-btn {
        background: none;
        color: white;
        border: 1px solid #444; 
        border-radius: 4px;
        padding: 8px 10px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        transition: background 0.2s, border-color 0.2s;
        display: flex;
        align-items: center;
        gap: 5px;
    }
    
    .header-btn i {
        font-size: 16px;
    }

    .header-btn:hover {
        background: #222;
        border-color: #666;
    }

    /* =========================================================
       뷰어 및 페이지 스타일
       ========================================================= */

    .viewer {
      position: relative;
      width: 100%;
      flex: 1; 
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden !important; 
    }

    .page {
      width: 80%;
      max-width: 800px;
      height: calc(100vh - 100px); 
      background: white;
      border-radius: 16px;
      padding: 40px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
      overflow: hidden;
      line-height: 1.8;
      font-size: 16px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    body.dark .page {
      background: #333;
      color: #f5f5f5;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
    }
    
    h1 {
      font-size: 28px;
      margin-bottom: 20px;
      text-align: center;
    }

    /* <h2> 스타일: 부제목 "덧붙이는 말" 전용 */
    h2.sub-chapter-title {
        font-size: 28px; 
        font-weight: 600;
        color: #333; 
        text-align: center;
        margin-top: 40px;
        margin-bottom: 20px;
        flex-shrink: 0;
    }
    
    body.dark h2.sub-chapter-title {
        color: #eee;
    }
    
    .page-text {
        flex: 1;
        overflow-y: auto; /* 페이지 내에서 내용이 길 경우 스크롤 허용 */
        white-space: pre-wrap;
    }

    /* =========================================================
       네비게이션 및 목차 스타일
       ========================================================= */
    .nav-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(51, 51, 51, 0.8);
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      font-size: 18px;
      cursor: pointer;
      opacity: 0.7;
      transition: opacity 0.3s, background 0.3s;
      z-index: 10;
    }
    
    body.dark .nav-btn {
        background: rgba(85, 85, 85, 0.8);
    }

    /* 데스크탑에서 페이지 중앙 근처에 배치 */
    #prevBtn { left: calc(50% - 450px); }
    #nextBtn { right: calc(50% - 450px); }

    .toc {
      position: absolute;
      top: 0;
      right: -300px; /* 목차 너비만큼 이동시켜 완전히 숨김 */
      width: 300px;
      height: 100%;
      background: #222;
      color: white;
      transition: right 0.3s ease;
      overflow-y: auto;
      padding: 20px;
      box-sizing: border-box; /* 삐져나옴 방지 */
      z-index: 20;
    }

    .toc.open {
      right: 0;
    }
    
    .toc li {
        cursor: pointer;
    }

    /* =========================================================
       미디어 쿼리 (모바일)
       ========================================================= */
    @media (max-width: 768px) {
      .app-header { padding: 0 10px; }
      .header-title { font-size: 16px; }
      .page {
        width: 95%;
        padding: 20px;
        height: calc(100vh - 80px); 
      }
      .header-btn { padding: 6px 8px; }
      
      /* 모바일에서는 좌우 버튼을 가장자리로 이동 */
      #prevBtn { left: 10px; }
      #nextBtn { right: 10px; }
    }
  </style>
</head>
<body>
    
  <header class="app-header">
      <div class="header-title">귀여운 음향학 서문</div>
      <div class="header-controls">
          <button id="homeBtn" class="header-btn" title="홈으로 이동">
              <i class="fas fa-home"></i> 홈
          </button>
          
          <button id="darkModeToggle" class="header-btn" title="테마 전환">
              <i class="fas fa-moon"></i> 
              <span id="darkModeLabel">다크 모드</span>
          </button>
          
          <button id="tocToggle" class="header-btn" title="목차 보기">
              <i class="fas fa-list"></i> 목차
          </button>
      </div>
  </header>

  <div class="viewer">
    <button id="prevBtn" class="nav-btn">〈</button>
    <button id="nextBtn" class="nav-btn">〉</button>

    <div class="page" id="page">
      <div class="page-text" id="pageText"></div>
      <div class="page-index" id="pageIndex"></div>
    </div>

    <div class="toc" id="toc">
      <h3>목차</h3>
      <ul id="tocList"></ul>
    </div>
  </div>

  <script>
    const book = {
      title: "귀여운 음향학 서문",
      chapterTitle: "귀여운 음향학 서문", 
      
      sections: [
        {
          type: "body",
          content: `‘소리’는 공기의 미세한 진동을 귀로 감지한 것을 말합니다. 넓은 의미에서는 귀로 들을 수 없는 순수한 진동 자체도 소리의 범주에 넣기도 합니다. 예를 들어, ‘초음파’는 그 진동이 너무 빨라 인간의 귀로는 음의 높낮이를 인식할 수 없지만, 공간을 통해 퍼져나가는 물리적인 진동이라는 본질적인 특성은 일반적인 소리와 정확히 같기 때문에 소리의 일종으로 봅니다. 이는 마치 자외선이나 적외선을 우리가 눈으로 볼 수는 없지만, 여전히 공간을 퍼져나가는 전자기적인 진동이라는 측면에서 빨주노초파남보의 가시광선과 같은 ‘빛’으로 취급하는 것과도 같습니다.
눈으로 볼 수 있는 파장 범위의 빛을 가시광선(visible light)이라고 부르듯, 귀로 들을 수 있는 주파수 범위의 소리를 가청음(audible sound)이라고 합니다. 인간의 감각기관이 인지할 수 있는 외부 자극은 실제로 존재하는 자극의 극히 일부에 불과합니다. 그래서 일명 ‘소리의 과학’이라 불리는 음향학(acoustics)이라는 분야에서는, 무엇이 공기에 진동을 일으키는가, 그 진동이 어떻게 공간을 이동하는가, 귀에 도달한 진동이 어떻게 뇌에서 감각으로 전환되는가 등 소리 발생의 전 과정을 다루게 됩니다. 다만, 무엇에 초점을 맞추는지에 따라 음향학의 세부 명칭이 달라집니다. 대표적인 음향학의 세부 분야로는 물리음향학, 전자음향학, 실내음향학, 해양음향학, 심리음향학, 음성음향학, 음악음향학 등이 있습니다. 한국에서는 특히 무대음향과 관련해서 음향이라는 용어가 자주 사용되는데, 마이크, 믹서, 앰프, 스피커 등을 다루는 분야는 음향학 중에서도 전자음향학(electroacoustics), 또 어떤 공간의 잔향이나 흡음 등을 다루는 분야는 실내음향학(room acoustics)이 되겠습니다. 소리(sound)와 빛(light)은 둘 다 우리의 감각기관으로 감지할 수 있는 ‘진동’이라는 측면에서 비슷한 점이 많습니다. 빛을 다루는 과학은 광학(optics)이라고 부르며, 안경사와 같이 시력을 교정하는 직업을 위해서도 반드시 학습해야 하는 기초 분야입니다. 한편, 빛을 쬐어 생기는 열로부터 음향 신호를 만들어내고 이를 다양한 산업·의료 환경에서 활용하는, 즉 광학과 음향학이 결합된 분야도 존재합니다. 이는 광음향학(optoacoustics)이라고 불립니다. 이 책의 제목은 『귀여운 음향학』입니다. 사실 음향학은 대학교의 학부 과정에서는 잘 보이지 않는 전공 분야입니다. 보통은 학부 고학년이나 대학원에서 세부 전공으로 배우게 되며, 어느 학교에서나 쉽게 찾아볼 수 있는 컴퓨터공학이나 영어영문학 같은 전공과는 대조적입니다. 이런 배경에는 이유가 있습니다. 음향학은 물리학의 하위 분야로, 그 안에서 다루는 역학, 열역학, 유체역학, 전자기학 등은 모두 물리학의 영역에 속합니다. 따라서 음향학은 하나의 독립적인 학문이라기보다는, 물리학에서 소리를 이해하는 데 필요한 지식들을 모아 체계적으로 정리해 놓은 분야라고 볼 수 있습니다. 그런 이유로 신입생이 곧바로 음향학을 배우는 것보다, 물리학적 기초를 다진 후에 입문하는 것이 훨씬 수월하기 때문에 해외를 포함하여 '음향학'이라는 이름으로 1학년부터 독립적인 전공이 개설되어 있는 경우는 굉장히 드뭅니다. 그럼에도 불구하고, 물리학 전공까지는 부담스럽지만 음향학에는 관심을 가진 분들도 분명히 있을 것입니다. 이 책은 그런 독자들을 위해, 기초적인 물리학 지식부터 다양한 음향학 분야에 이르기까지 친절하게 안내하는 것을 목표로 합니다. 그래서 다소 딱딱하게 느껴질 수 있는 '음향학 입문’이나 ‘기초음향학’과 같은 제목 대신, 조금 더 가볍고 즐겁게 다가가길 바라는 마음을 담아 『귀여운 음향학』이라고 이름 붙였습니다.`
        },
        {
          type: "subtitle",
          title: "덧붙이는 말"
        },
        {
          type: "body",
          content: `음향학에 사람들이 관심을 갖게 되는 경위는 다양할 수 있지만, 대개 음악에 대한 관심이 공학적으로 전개되면서 전자음향기기를 통해 음향에 입문하는 경우가 많은 것 같습니다. 그래서 음악과 음향학을 혼동하는 경우가 간혹 있기 때문에 그 차이에 대해서 잠깐 언급을 하도록 하겠습니다. 음악은 타인이 볼 수 없는 한 인간의 내면을 소리라는 도구로 드러내어, 감상자가 받아들이는 순간에서야 비로소 완성되는 예술 분야입니다. 어떤 작곡가가 음악을 만들었을 때, 그 음악은 모든 사람들에게 각각 다르게 느껴집니다. 심지어는 작곡가 본인에게조차도, 오늘의 자신과 내일의 자신에게 다르게 들리는 경우가 허다합니다. 음악은 이렇게 ‘무엇이 소리의 가장 아름다운 조합인가’에 대해 정해진 답이 없이 추상적인 고민을 끝없이 이어가야 하는 지극히 주관적인 분야입니다. 반면 음향학은 인간의 내면적 표현이 아니라, 인간의 정신 밖에서 일어나는 객관적 현상에 주로 초점을 맞추는 과학 분야입니다. 음향학에서 사용되는 많은 개념들, 예컨대 잔향 시간, 데시벨, 주파수, 파장, 음속 등은 모두 물리적 세계에서 실험을 통해 직접 측정하고 계산할 수 있는 양들입니다. 다시 말해, 음향학은 소리를 둘러싼 객관적 법칙을 탐구하는 학문이며, 우리가 음악이나 말소리로 표현하는 감정과 의미 이전에, 소리라는 현상 자체가 어떤 원리로 생성되고 전파되는지를 설명하는 데 주력합니다. 음악을 표현하는 데에 사용되는 감각과, 음향을 이해하는 데에 사용되는 감각이 다를 수 있습니다. 음악이 좋아서 음향 공부를 시작했으나, 너무 복잡하고 낯설게만 느껴져서 이내 흥미를 잃는 경우가 많이 생기는 이유입니다. 하지만 학습을 하고 난 보상은 충분히 달콤할 것이라 자신합니다. 어떤 현상에 대한 깊은 이해는, 그 현상으로부터 비롯되는 감정의 파도에 무작정 휘둘리지 않고 스스로를 다스릴 수 있게 합니다. 음향학을 배우고 나면 소리와 관련된 많은 일상적 현상들을 바라보는 눈이 달라질 것입니다. 예컨대, 나이 들어 잘 안 들린다는 부모님을 보며, “아, 왜 이렇게 못 알아들어!”라는 짜증 대신 “고주파수가 잘 안 들려서 자음의 구분이 어려우실 수밖에 없으시겠다” 하고 이해할 수 있게 될 것입니다. 뿐만 아니라 음악적 상상력 역시, 어떤 틀 안에 갇히지 않고 한층 더 자유로워질 수 있을 것입니다. 상상력이라는 것은 예술 뿐만 아니라 물리에도 존재하기 때문에, 때로는 물리가 예술의 큰 영감이 될 수 있거든요.`
        }
      ]
    };

    const charsPerPage = 1200; 
    const pages = [];

    // 페이지 구성 로직 (subtitle + body 연결 유지)
    book.sections.forEach((section, index) => {
      if (section.type === 'subtitle') {
          const nextBodyIndex = book.sections.findIndex((s, i) => i > index && s.type === 'body');
          if (nextBodyIndex !== -1) {
              const nextBody = book.sections[nextBodyIndex];
              const estimatedTitleLength = 50; 
              const firstChunk = nextBody.content.slice(0, charsPerPage - estimatedTitleLength); 
              
              pages.push({ 
                  type: 'subtitle-with-body', 
                  subtitle: section.title, 
                  content: firstChunk 
              });
              
              const remainingContent = nextBody.content.slice(firstChunk.length);
              for (let i = 0; i < remainingContent.length; i += charsPerPage) {
                  pages.push({ type: 'body', content: remainingContent.slice(i, i + charsPerPage) });
              }
              nextBody.processed = true; 
          } else {
              pages.push({ type: 'subtitle', content: section.title });
          }

      } else if (section.type === 'body' && !section.processed) {
          for (let i = 0; i < section.content.length; i += charsPerPage) {
              pages.push({ type: 'body', content: section.content.slice(i, i + charsPerPage) });
          }
      }
    });

    let currentPage = 0;
    const pageText = document.getElementById("pageText");
    const pageIndex = document.getElementById("pageIndex");
    const tocEl = document.getElementById("toc");
    const bodyEl = document.body;
    const darkModeToggle = document.getElementById("darkModeToggle");
    const darkModeIcon = darkModeToggle.querySelector('i'); 
    const darkModeLabel = document.getElementById("darkModeLabel"); 
    
    const initialDarkMode = localStorage.getItem('darkMode') === 'true';

    function setDarkMode(isDark) {
        if (isDark) {
            bodyEl.classList.add("dark");
            darkModeIcon.classList.remove("fa-moon");
            darkModeIcon.classList.add("fa-sun");
            darkModeLabel.innerText = "라이트 모드";
            localStorage.setItem('darkMode', 'true');
        } else {
            bodyEl.classList.remove("dark");
            darkModeIcon.classList.remove("fa-sun");
            darkModeIcon.classList.add("fa-moon");
            darkModeLabel.innerText = "다크 모드";
            localStorage.setItem('darkMode', 'false');
        }
    }
    
    setDarkMode(initialDarkMode);

    function renderPage() {
      const pageData = pages[currentPage];
      let content = '';
      
      if (currentPage === 0) {
          content = `<h1>${book.title}</h1><p>${pageData.content}</p>`;
      } 
      else if (pageData.type === 'subtitle-with-body') {
          content = `<h2 class="sub-chapter-title">${pageData.subtitle}</h2><p>${pageData.content}</p>`; 
      }
      else {
          content = `<p>${pageData.content}</p>`;
      }

      pageText.innerHTML = content;
      pageIndex.innerText = `${currentPage + 1} / ${pages.length}`;
    }

    function renderTOC() {
      const tocList = document.getElementById("tocList");
      tocList.innerHTML = `<li onclick="goTo(0)">${book.chapterTitle} (p.1)</li>`;
      
      book.sections.forEach(section => {
        if (section.type === 'subtitle') {
            const pageIndexForSubtitle = pages.findIndex(p => p.type === 'subtitle-with-body' && p.subtitle === section.title);
            if (pageIndexForSubtitle !== -1) {
                tocList.innerHTML += `<li onclick="goTo(${pageIndexForSubtitle})" class="toc-subtitle">${section.title} (p.${pageIndexForSubtitle + 1})</li>`;
            }
        }
      });
    }
    
    function goTo(i) {
      currentPage = i;
      renderPage();
      tocEl.classList.remove("open");
    }

    document.getElementById("nextBtn").onclick = () => {
      if (currentPage < pages.length - 1) {
        currentPage++;
        renderPage();
      }
    };
    document.getElementById("prevBtn").onclick = () => {
      if (currentPage > 0) {
        currentPage--;
        renderPage();
      }
    };
    document.getElementById("tocToggle").onclick = () => {
      tocEl.classList.toggle("open");
    };
    document.getElementById("homeBtn").onclick = () => {
      window.location.href = "/"; 
    };
    
    darkModeToggle.onclick = () => {
        const isDark = !bodyEl.classList.contains("dark");
        setDarkMode(isDark);
    };

    renderTOC();
    renderPage();

    // 모바일 슬라이드 기능
    let touchStartX = 0;
    let touchEndX = 0;
    
    document.body.addEventListener("touchstart", (e) => {
      // 터치 시작 시 세로 스크롤 방지
      e.preventDefault(); 
      touchStartX = e.changedTouches[0].screenX;
    });
    
    document.body.addEventListener("touchmove", (e) => {
      // 터치 이동 중 세로 스크롤 방지
      e.preventDefault(); 
    }, { passive: false });

    document.body.addEventListener("touchend", (e) => {
      touchEndX = e.changedTouches[0].screenX;
      // 50픽셀 이상 왼쪽으로 슬라이드 (다음 페이지)
      if (touchStartX - touchEndX > 50) {
        if (currentPage < pages.length - 1) {
          currentPage++;
          renderPage();
        }
      } 
      // 50픽셀 이상 오른쪽으로 슬라이드 (이전 페이지)
      else if (touchEndX - touchStartX > 50) {
        if (currentPage > 0) {
          currentPage--;
          renderPage();
        }
      }
    });
  </script>

</body>
</html>