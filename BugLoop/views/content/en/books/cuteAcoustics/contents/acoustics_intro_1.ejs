<!DOCTYPE html>
<html lang="<%= lang %>" data-lang="<%= lang %>">
<%
  // ✅ e-reader 공통 설정
  const supportedLangs = ['ko','en','fr','zh','ja','es'];
  const bookId = 'cuteAcoustics';
  const chapterId = 'acoustics_intro_1';

  // ✅ locale.books에서 책 / 챕터 자동 탐색
  const book = locale?.books?.[bookId] || null;

  let chapter = null;
  if (book && Array.isArray(book.toc)) {
    for (const section of book.toc) {
      if (Array.isArray(section.chapters)) {
        const found = section.chapters.find(c => c.id === chapterId);
        if (found) {
          chapter = found;
          break;
        }
      }
    }
  }

  // ✅ 안전 장치
  if (!chapter) {
    chapter = {
      id: chapterId,
      title: 'So, You Want to Become an Expert on Sound?',
      description: 'Cute Acoustics — An introduction to becoming intimate with sound'
    };
  }
%>

<!-- ✅ 전자책 전용 head -->
<%- include('../../../../../partials/e-reader-head.ejs', {
  lang,
  supportedLangs,
  bookId,
  book,
  chapter
}) %>

<body>

  <%- include('../../../../../partials/e-reader-header', { lang, locale }) %>

  <div class="viewer">
    <button id="prevBtn" class="nav-btn">〈</button>
    <button id="nextBtn" class="nav-btn">〉</button>

    <div class="page" id="page">
      <div class="page-text" id="pageText">

        <h1>Introduction</h1>
        <h2>So, You Want to Become an Expert on Sound?</h2>

        <p>
        When you begin to delve deeply into any field, you inevitably come face to face
        with solitude. I may have poured countless hours into understanding a subject,
        while the rest of the world has spent their time in entirely different ways.
        As we embark on this exploration of sound, you may find that the more you study,
        the closer you grow to the world itself—and the farther you drift from the
        “people” in that world.
        </p>

        <p>
        That subtle distance you sometimes feel when listening to university professors
        speak may one day be something others feel when talking to you.
        Terrifying, isn’t it?
        </p>

        <p>
        But there is something genuinely beautiful about cultivating the ability
        to feel one thing deeply.
        This may sound like a strange comparison, but have you ever doubted whether
        you were truly hungry?
        </p>

        <p>
        Most people don’t question hunger itself. Hunger feels clear.
        It moves you to act, to look for food that will satisfy it.
        You trust that eating will soon bring fulfillment,
        and because you believe in that future outcome,
        you are able to move forward.
        </p>

        <p>
        Solitude is simply solitude—it is not pessimism.
        In fact, high-quality solitude exists on the opposite side of pessimism.
        </p>

        <p>
        Sound is, in itself, a remarkably fundamental subject.
        In this journey, we are going to go on a kind of date with sound,
        growing closer to it than anyone else.
        When you encounter the many activities and expressions that arise from sound,
        you will sense their pleasures more keenly than others ever could.
        </p>

        <p>
        Others may never fully understand the joy you feel.
        That, too, is a form of solitude.
        But I hope that through this long journey of becoming intimate with sound,
        you will come to enjoy that delightful solitude.
        </p>

        <p>
        And no—absolutely not because I am lonely,
        or because I am trying to recruit companions
        to share my loneliness.
        Absolutely not.
        </p>

      </div>

      <div class="page-index" id="pageIndex"></div>
    </div>

    <div class="toc" id="toc">
      <h3>Table of Contents</h3>
      <ul id="tocList"></ul>
    </div>
  </div>

  <!-- e-reader settings -->
  <script>
    window.BUGLOOP_BOOK_ID = '<%= bookId %>';
    window.BUGLOOP_CURRENT_CHAPTER_ID = '<%= chapterId %>';
    window.BUGLOOP_BOOKS = <%- JSON.stringify(locale.books) %>;
  </script>

  <script src="/assets/js/e-reader.js"></script>

</body>
</html>
