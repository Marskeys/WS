<style>
/* ğŸš€ ì„œë¸Œë©”ë‰´ ê°„ê²© ë° í°íŠ¸/ì •ë ¬ ì¡°ì •ì„ ìœ„í•œ ìŠ¤íƒ€ì¼ */
.header-menu .submenu li a,
.header-menu .submenu li span {
  /* ìƒí•˜ íŒ¨ë”©ì„ 8pxë¡œ ì„¤ì •í•˜ì—¬ ê°„ê²©ì„ ë„“í™ë‹ˆë‹¤.
 ì´ ê°’ì„ ì¡°ì •í•˜ì—¬ ê°„ê²©ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. */
  padding-top: 8px;
  padding-bottom: 8px;
 /* ë§í¬ë‚˜ í…ìŠ¤íŠ¸ê°€ <li>ì˜ ì „ì²´ ë„ˆë¹„ë¥¼ ì°¨ì§€í•˜ë„ë¡ ì„¤ì • */
  display: block;
 /* ìƒˆë¡œ ì¶”ê°€ëœ í°íŠ¸ í¬ê¸° í†µì¼ ë° ìˆ˜ì§ ì •ë ¬ */
  font-size: 14px;
 /* ëª¨ë“  ì„œë¸Œë©”ë‰´ í•­ëª©ì˜ í°íŠ¸ í¬ê¸° í†µì¼ */
  vertical-align: middle;
 /* í…ìŠ¤íŠ¸ê°€ ìœ„ë¡œ ì ë¦¬ëŠ” í˜„ìƒ ë°©ì§€ */
}

/* ì¶”ê°€: YouTube ë¡œê³  ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ì„ ìœ„í•´ main-menu-containerì— flex ì ìš© */
.header-menu .main-menu-container {
    display: flex;
 align-items: center; /* ëª¨ë“  í•­ëª©ì„ ìˆ˜ì§ ì¤‘ì•™ ì •ë ¬ */
    height: 100%;
 /* ë¶€ëª¨ ìš”ì†Œì˜ ë†’ì´ë¥¼ ì±„ìš°ë„ë¡ ì„¤ì • */
}
</style>

<div class="full-header-container" style="z-index:20000;">
  <div class="header-top">
    <div class="top-controls">
      <div class="left-controls">
        <%
          // ğŸ“Œ ë³€ê²½ ì‚¬í•­: ì •ê·œì‹ì— 'es' ì¶”ê°€
          const pathWithoutLang = currentPath.replace(/^\/(ko|en|fr|zh|ja|es)/, '');
 const showLogo = ['/signup', '/editor', '/login', '/write'].includes(pathWithoutLang) ||
                           pathWithoutLang.startsWith('/post') ||
                           pathWithoutLang.startsWith('/edit');
 %>
        <% if (showLogo) { %>
          <a href="/<%= lang %>/" class="logo-link" data-panel-link aria-label="BugLoop í™ˆ"></a>
        <% } %>
      </div>

      <nav class="header-menu" aria-label="ì£¼ ë©”ë‰´">
        <ul class="main-menu-container">

          <a href="https://www.youtube.com" target="_blank" aria-label="YouTube ë°”ë¡œê°€ê¸°">
            <img src="/assets/images/youtube.png" alt="YouTube"
         
         style="height:28px; width:auto; vertical-align:middle; margin-left: 3px; margin-right:3px;">
          </a>

          <li class="menu-item-wrapper">
            <span class="menu-label">ë¦¬ë·°</span>
            <ul class="submenu">
              <li><a href="/<%= lang %>/review/book" data-panel-link>ë¶ìŠ¤ íŒ”ë§ˆ 2 í”„ë¡œ</a></li>
              <li><span class="disabled-menu" style="color: #aaa; cursor: 
 not-allowed;">ì½˜í…ì¸  ëŒ€ê¸° ì¤‘ (1)</span></li>
              <li><span class="disabled-menu" style="color: #aaa; cursor: not-allowed;">ì½˜í…ì¸  ëŒ€ê¸° ì¤‘ (2)</span></li>
              <li><span class="disabled-menu" style="color: #aaa;
 cursor: not-allowed;">ì½˜í…ì¸  ëŒ€ê¸° ì¤‘ (3)</span></li>
            </ul>
          </li>

          <li class="menu-item-wrapper">
            <span class="menu-label">ì˜¤ë””ì˜¤ë¶</span>
            <ul class="submenu">
              <li><span class="disabled-menu" style="color: #aaa;
 cursor: not-allowed;">ê·€ì—¬ìš´ ìŒí–¥í•™</span></li>
              <li><span class="disabled-menu" style="color: #aaa;
 cursor: not-allowed;">í”¼ì•„ë…¸ ì¹˜ëŠ” í”„ë¡œë“€ì„œ: ì‹ ë¹„í•œ ë°˜ì£¼ë²•</span></li>
              <li><span class="disabled-menu" style="color: #aaa;
 cursor: not-allowed;">ë¯¸ì™„ì„± ê³ í†µ</span></li>
              <li><span class="disabled-menu" style="color: #aaa;
 cursor: not-allowed;">ê³„ì‚°ì˜ ì˜¨ê¸°</span></li>
            </ul>
          </li>

          <li class="menu-item-wrapper">
            <span class="menu-label">ìŒì•… ì½˜í…ì¸ </span>
            <ul class="submenu">
              <li><span class="disabled-menu" style="color: #aaa;
 cursor: not-allowed;">ì½˜í…ì¸  ëŒ€ê¸° ì¤‘ (1)</span></li>
              <li><span class="disabled-menu" style="color: #aaa;
 cursor: not-allowed;">ì½˜í…ì¸  ëŒ€ê¸° ì¤‘ (2)</span></li>
              <li><span class="disabled-menu" style="color: #aaa;
 cursor: not-allowed;">ì½˜í…ì¸  ëŒ€ê¸° ì¤‘ (3)</span></li>
              <li><span class="disabled-menu" style="color: #aaa;
 cursor: not-allowed;">ì½˜í…ì¸  ëŒ€ê¸° ì¤‘ (4)</span></li>
            </ul>
          </li>

          <li class="menu-item-wrapper">
            <span class="menu-label">ë‘ë‡Œ ê²Œì„</span>
            <ul class="submenu">
              <li><span class="disabled-menu" style="color: #aaa;
 cursor: not-allowed;">ì½˜í…ì¸  ëŒ€ê¸° ì¤‘ (1)</span></li>
              <li><span class="disabled-menu" style="color: #aaa;
 cursor: not-allowed;">ì½˜í…ì¸  ëŒ€ê¸° ì¤‘ (2)</span></li>
              <li><span class="disabled-menu" style="color: #aaa;
 cursor: not-allowed;">ì½˜í…ì¸  ëŒ€ê¸° ì¤‘ (3)</span></li>
            </ul>
          </li>
        </ul>
      </nav>

      <div class="right-controls" id="right-controls">
        <div class="language-dropdown">
          <button id="langToggle" class="lang-btn" aria-haspopup="menu" aria-expanded="false" aria-controls="langMenu">
            <%
              let flagCode 
 = lang;
              switch(lang) {
                case 'ko': flagCode = 'kr'; break;
                case 'en': flagCode = 'gb'; break;
                case 'zh': flagCode = 'cn'; break;
                case 'ja': flagCode = 'jp'; 
 break;
                case 'fr': flagCode = 'fr'; break;
                // ğŸ“Œ ë³€ê²½ ì‚¬í•­: ìŠ¤í˜ì¸ì–´ í”Œë˜ê·¸ ì½”ë“œ ì¶”ê°€
                case 'es': flagCode = 'es'; break; 
                default: flagCode = 'kr';
              }
            %>
            <span class="fi fi-<%= flagCode %>" aria-hidden="true"></span>
            <i class="fas fa-caret-down" aria-hidden="true"></i>
  
         </button>
          <ul id="langMenu" class="lang-menu" role="menu">
            <%
              // ğŸ“Œ ë³€ê²½ ì‚¬í•­: ì •ê·œì‹ì— 'es' ì¶”ê°€
              const currentPathWithoutLang = currentPath.replace(/^\/(ko|en|fr|zh|ja|es)/, '');
 %>
            <% supportedLangs.forEach(langCode => { %>
              <li role="none">
                <a href="/<%= langCode %><%= currentPathWithoutLang %>"
                   class="lang-option <%= langCode === lang ? 'active-lang' : '' %>"
                   role="menuitem">
 
                  <span class="fi fi-<%= (langCode === 'ko' ? 'kr' : (langCode === 'en' ? 'gb' : (langCode === 'zh' ? 'cn' : (langCode === 'ja' ? 'jp' : langCode)))) %>"></span>
                  <% 
                    const langNames = {
                      ko: 'í•œêµ­ì–´', 
                      en: 'English', 
                      fr: 'FranÃ§ais', 
                      zh: 'ç®€ä½“ä¸­æ–‡', 
                      ja: 'æ—¥æœ¬èª',
                      // ğŸ“Œ ë³€ê²½ ì‚¬í•­: ìŠ¤í˜ì¸ì–´ ë©”ë‰´ í…ìŠ¤íŠ¸ ì¶”ê°€
                      es: 'EspaÃ±ol' 
                    };
                  %>
                  <%= langNames[langCode] || langCode %>
                </a>
          
      </li>
            <% });
 %>
          </ul>
        </div>

        <div class="light-switch" role="switch" aria-checked="false" aria-label="ë‹¤í¬ ëª¨ë“œ ì „í™˜" tabindex="0" id="mode-toggle-accessible">
          <span class="switch-label"><span class="switch-handle"></span></span>
        </div>
      </div>
    </div>
  </div>

  <aside class="side-panel main-panel-only">
    <div class="sidebar-wrapper">
      <nav class="vscode-sidebar" aria-label="íŒ¨ë„ ì‚¬ì´ë“œë°”" role="tablist">
        <a href="#" class="sidebar-icon toggle-extension blink-highlight" title="íŒ¨ë„ ì—´ê¸°/ë‹«ê¸°" 
 aria-label="íŒ¨ë„ ì—´ê¸°/ë‹«ê¸°">
          <i class="fas fa-chevron-left" aria-hidden="true"></i>
        </a>

        <a href="/<%= lang %>/" class="sidebar-icon logo" data-tab="home" title="BugLoop í™ˆ" aria-label="BugLoop í™ˆ" aria-selected="false">
          <img src="/assets/images/BugLoop.png" alt="BugLoop">
        </a>
        <a href="/<%= lang %>/" class="sidebar-icon" data-tab="home" title="í™ˆ" aria-selected="false">
          <i class="fas fa-home" aria-hidden="true"></i>
        </a>

  <a href="#" class="sidebar-icon" data-tab="profile" title="í”„ë¡œí•„" aria-selected="false" role="tab">
          <i class="fas fa-user" aria-hidden="true"></i>
        </a>
         <a href="#" class="sidebar-icon" data-tab="profile" title="í”„ë¡œí•„" aria-selected="false" role="tab">
          <i class="fas fa-user" aria-hidden="true"></i>
        </a>
         <a href="#" class="sidebar-icon" data-tab="profile" title="í”„ë¡œí•„" aria-selected="false" role="tab">
          <i class="fas fa-user" aria-hidden="true"></i>
        </a>
        <a href="#" class="sidebar-icon" data-tab="profile" title="í”„ë¡œí•„" aria-selected="false" role="tab">
          <i class="fas fa-user" aria-hidden="true"></i>
        </a>
        <a href="#" class="sidebar-icon" data-tab="search" title="ê²€ìƒ‰" aria-selected="false" role="tab">
          <i class="fas fa-search" aria-hidden="true"></i>
        </a>

        <% if (user) { %>
          <% if (Number(user.is_admin) === 1) { %>
   
          <a href="/<%= lang %>/write" class="sidebar-icon" data-tab="write" title="ê¸€ì“°ê¸°" aria-selected="false">
              <i class="fas fa-pen" aria-hidden="true"></i>
            </a>
          <% } %>
        <% } %>

        <a href="#" class="sidebar-icon" data-tab="settings" title="ì„¤ì •" aria-selected="false" aria-pressed="false" role="button">
          <i class="fas fa-cog" aria-hidden="true"></i>
     
     </a>
      </nav>

      <div class="sidebar-extension-panel">
        <div class="panel-logo">
          <img src="/assets/images/BugLoop.png" alt="BugLoop" loading="lazy" />
        </div>
        <div class="tab-container"></div>
        <div class="tab-content" data-tab="profile" style="display: none;">
          <%- include('./profile', { locale }) %>
        </div>

        <% 
 if (typeof posts !== 'undefined') { %>
          <div class="tab-content" data-tab="search" style="display: none;">
            <section class="search-tab">
             
              <div id="sidebar-table-template" data-lang="<%= lang %>">
                <%- include('table') %>
              </div>
    
         </section>
          </div>
        <% } %>

        <div class="panel-footer">
          <% if (user) { %>
            <div class="greeting" style="text-align: center;
 margin-top: 10px; font-weight: bold;">
              <%= user.nickname %>ë‹˜, ì•ˆë…•í•˜ì„¸ìš”!
            </div>
          <% } %>
          <% if (currentPath !== '/signup' && currentPath !== '/login') { %>
            <div class="auth-buttons">
              <% if (user) { %>
     
               <a href="/<%= lang %>/logout" class="auth-btn logout">ë¡œê·¸ì•„ì›ƒ</a>
              <% } else { %> <a class="auth-btn signup" onclick="return false;" style="pointer-events: none;
 opacity: 0.5; cursor: not-allowed;">íšŒì›ê°€ì…</a>
                <button class="auth-btn login" id="login" type="button">ë¡œê·¸ì¸</button>
              <% } %>
            </div>
          <% } %>

          <div id="login-form-container" class="login-form-container hidden">
            <form id="login-form" method="POST" action="/login">
         
           <input type="text" name="id" placeholder="ì•„ì´ë””" required />
              <input type="password" name="password" placeholder="ë¹„ë°€ë²ˆí˜¸" required />
              <button type="submit">ë¡œê·¸ì¸</button>
            </form>
          </div>

          <div class="real-footer">
            <small>Â© 2025 Bug Loop</small>
        
    </div>
        </div>
      </div>
    </div>
  </aside>
</div>

<script>
  (function(){
    var path = location.pathname.replace(/\/$/, '');
    document.querySelectorAll('.submenu a').forEach(function(a){
      var href = (a.getAttribute('href') || '').replace(/\/$/, '');
      if (href === path) {
        a.classList.add('active');
        var label = a.closest('.menu-item-wrapper')?.querySelector('.menu-label');
 if (label) label.classList.add('active-label');
      }
    });
  })();
</script>

<script>
  (() => {
    // âš ï¸ data-panel-linkê°€ ì œê±°ëœ í™ˆ ì•„ì´ì½˜ì€ ì´ ë¡œì§ì„ í†µí•´ active ìƒíƒœê°€ ì„¤ì •ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    const homeEls = document.querySelectorAll('.vscode-sidebar a.sidebar-icon[data-tab="home"]:not(.toggle-extension)');
    const stripLang = (p) => {
      const path = (p || location.pathname).replace(/[#?].*$/, '');
      // ğŸ“Œ ë³€ê²½ ì‚¬í•­: ì •ê·œì‹ì— 'es' ì¶”ê°€
      const noLang = path.replace(/^\/(ko|en|fr|zh|ja|es)(?:\/|$)/, '');
      return noLang === '' ? '/' : noLang.replace(/\/$/, '') || '/';
    };
    const isHomePath = (p) => stripLang(p) === '/';
    const setHomeActive = (flag) => {
      homeEls.forEach(el => 
 {
        el.classList.toggle('active', flag);
        el.querySelector('i')?.classList.toggle('active', flag);
      });
    };
    const sync = () => setHomeActive(isHomePath(location.pathname));

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', sync, { once: true });
    } else {
      sync();
    }

    // âš ï¸ í™ˆ ì•„ì´ì½˜ì€ ë” ì´ìƒ data-panel-linkê°€ ì•„ë‹ˆë¯€ë¡œ ì´ ë¦¬ìŠ¤ë„ˆì— ê±¸ë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤.
    document.addEventListener('click', (e) => {
      const a = e.target.closest('a[data-panel-link]');
      if (!a) return;
    
    const pn = new URL(a.getAttribute('href') || '/', location.origin).pathname;
      setHomeActive(isHomePath(pn));
    });
    window.addEventListener('popstate', sync);
 ['pushState','replaceState'].forEach(fn => {
      const orig = history[fn];
      history[fn] = function(...args){
        const ret = orig.apply(this, args);
        window.dispatchEvent(new Event('panel:navigated'));
        return ret;
      };
    });
 window.addEventListener('panel:navigated', sync);
  })();
</script>

<script>
  (function(){
    const bubble = document.getElementById('hardware-hint');
    const label  = document.getElementById('hardware-label');
    if (!bubble || !label) return;
  
    /** â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     * 0) ìƒìˆ˜/ìœ í‹¸
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    const KEY = 'bugloop.hideHardwareHint';
 const isShown = () =>
      bubble.style.display !== 'none' && bubble.getAttribute('aria-hidden') !== 'true';
 function show(){
      bubble.style.display = 'inline-flex';
      bubble.setAttribute('aria-hidden', 'false');
 }
    function hide(){
      localStorage.setItem(KEY, '1');
      bubble.style.display = 'none';
      bubble.setAttribute('aria-hidden', 'true');
      label?.focus?.();
 }
  
    /** â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     * 1) í¬í„¸: ì¡°ìƒ overflow/transform ì˜í–¥ ì œê±°
     * (fixed ê¸°ì¤€ì„ ë·°í¬íŠ¸ë¡œ ê³ ì •)
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    if (bubble.parentNode !== document.body) {
      bubble.style.position = 'fixed';
 bubble.style.left = '-9999px';
      bubble.style.top  = '-9999px';
      document.body.appendChild(bubble);
    }
  
    // ì´ë²¤íŠ¸ íŒ¨ìŠ¤ìŠ¤ë£¨: ìŠ¤í¬ë¡¤ ë§‰ì§€ ì•Šê²Œ
    bubble.style.pointerEvents = 'none';
 const closeBtn = bubble.querySelector('.hint-close');
    if (closeBtn) closeBtn.style.pointerEvents = 'auto';
  
    /** â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     * 2) ìœ„ì¹˜ ê³„ì‚°: ë¼ë²¨ ê¸°ì¤€ ì—¬ë°±(ì¢Œ:20px, ìƒ:8px)
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    function placeBubble(){
      const r = label.getBoundingClientRect();
 bubble.style.left = (Math.round(r.left + 20)) + 'px';
      bubble.style.top  = (Math.round(r.bottom + 8)) + 'px';
 if (!isShown() && localStorage.getItem(KEY) !== '1') show();
    }
  
    /** â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     * 3) ì• ë‹ˆë©”ì´ì…˜/ì „í™˜ ë™ì•ˆ í”„ë ˆì„ ì¶”ì  (rAF ë£¨í”„)
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    let followRAF = 0;
 function cancelFollow(){
      if (followRAF) cancelAnimationFrame(followRAF), followRAF = 0;
 }
    function startFollow(ms = 600){
      const end = performance.now() + ms;
      cancelFollow();
 const tick = () => {
        placeBubble();
 if (performance.now() < end) followRAF = requestAnimationFrame(tick);
      };
      followRAF = requestAnimationFrame(tick);
    }
  
    /** â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     * 4) íŠ¸ë¦¬ê±°ë“¤: ì¦‰ì‹œ/ì§€ì† ê°±ì‹ 
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    // ì´ˆê¸° ë°°ì¹˜
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', placeBubble, { once:true });
 } else {
      placeBubble();
    }
  
    // ìŠ¤í¬ë¡¤/ë¦¬ì‚¬ì´ì¦ˆ ì¦‰ì‹œ ë°˜ì˜
    window.addEventListener('scroll', placeBubble, { capture:true, passive:true });
 window.addEventListener('resize', placeBubble);
  
    // íŒ¨ë„ í† ê¸€ í´ë¦­ ì‹œì ë¶€í„° ë”°ë¼ë¶™ê¸°
    document.querySelector('.toggle-extension')?.addEventListener('click', () => {
      placeBubble();
      startFollow(800);
    });
 // ì»¤ìŠ¤í…€ ë‚´ë¹„ ì´ë²¤íŠ¸(ë„¤ ì½”ë“œ ìœ ì§€)
    window.addEventListener('panel:navigated', () => {
      placeBubble();
      startFollow(400);
    });
 // ë ˆì´ì•„ì›ƒ í¬ê¸° ë³€í™” ê°ì§€(í—¤ë”/íŒ¨ë„/ë©”ì¸ ë˜í¼ ë“±)
    const ro = new ResizeObserver(() => placeBubble());
 ['.full-header-container', '.main-panel-only', '.header-top', 'body', 'html']
      .forEach(sel => { const el = document.querySelector(sel); if (el) ro.observe(el); });
 // íŠ¸ëœì§€ì…˜ ì‹œì‘ í”„ë ˆì„ë¶€í„° rAF ì¶”ì  (ìº¡ì²˜ ë‹¨ê³„)
    const transTargets = ['.sidebar-extension-panel', '.full-header-container', '.main-panel-only', '.header-top'];
 document.addEventListener('transitionstart', (e) => {
      if (transTargets.some(sel => e.target.matches?.(sel))) {
        placeBubble();
        // e.elapsedTimeì€ start ì‹œì ì—” 0ì¼ ìˆ˜ ìˆìŒ â†’ ê¸°ë³¸ 700ms + 200ms ì—¬ìœ 
        startFollow((e.elapsedTime ? e.elapsedTime * 1000 : 500) + 400);
      }
    }, true);
 /** â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
     * 5) ë‹«ê¸°(X) + ì „ì—­ ESC
     * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    closeBtn?.addEventListener('click', hide);
 // ë²„ë¸”ì€ pointer-events:none â†’ í‚¤ì…ë ¥ì€ documentì—ì„œ ì²˜ë¦¬
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && isShown()) hide();
    }, true);
 // ì²« ì§„ì… ìë™ ë…¸ì¶œ(ì‚¬ìš©ìê°€ ìˆ¨ê¸°ì§€ ì•Šì•˜ë‹¤ë©´)
    if (localStorage.getItem(KEY) !== '1') show();
  })();
 </script>
  
  <script>
  // âš ï¸ ì£¼ì˜: ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì„œë²„ íŒŒì¼ ìˆ˜ì •ê³¼ ê´€ê³„ì—†ì´, ì–¸ì–´ ëª©ë¡ì„ í•˜ë“œì½”ë”©ëœ ê°’ì—ì„œ ê°€ì ¸ì™€ ì²˜ë¦¬í•©ë‹ˆë‹¤.
  // ì„œë²„ íŒŒì¼(`app.js`)ì—ì„œ `supportedLangs` ë°°ì—´ì´ EJS ë¡œì»¬ ë³€ìˆ˜ë¡œ ì˜ ì „ë‹¬ë˜ê³  ìˆê³ ,
  // ì–¸ì–´ ì½”ë“œ(`es`)ëŠ” í”Œë˜ê·¸ ì´ë¯¸ì§€ (`fi-es`)ê°€ ìˆëŠ” ê²ƒìœ¼ë¡œ ê°€ì •í•˜ê³  ì²˜ë¦¬í–ˆìŠµë‹ˆë‹¤.
document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('[data-panel-link]').forEach(link => {
    link.addEventListener('click', async (e) => {
      e.preventDefault();
      const url = link.getAttribute('href');
      try {
        const res = await fetch(url + '?partial=1', { headers: { 'X-Requested-With': 'XMLHttpRequest' }});
        const html = await res.text();
        const panel = document.querySelector('#mini-lecture');
        if (panel) {
      
         panel.innerHTML = html;
          panel.scrollTo(0, 0);

          // ì´ì „ ìˆ˜ì •: íŒ¨ë„ ë¡œë“œ í›„ ë¦¬ì‚¬ì´ì € ë° ìŠ¤í¬ë¡¤ ìº¡ì²˜ ì¬ì´ˆê¸°í™”
          if (typeof window.initPanelResizer === 'function') {
              window.initPanelResizer();
          }
          if (typeof window.bindPanelScrollTrap === 'function') {
              window.bindPanelScrollTrap();
          }
            
        }
      } catch (err) {
        console.error('íŒ¨ë„ ë¡œë“œ ì˜¤ë¥˜:', err);
      }
    });
  });
});
 </script>


<script src="/assets/js/header.js"></script>
<script src="/assets/js/global.js"></script>