<div class="full-header-container" style="z-index:20000;">
    <div class="header-top">
      <div class="top-controls">
        <div class="left-controls">
          <%
          const pathWithoutLang = currentPath.replace(/^\/(ko|en|fr|zh|ja)/, '');
          const showLogo = ['/signup', '/editor', '/login', '/write'].includes(pathWithoutLang) ||
                          pathWithoutLang.startsWith('/post') ||
                          pathWithoutLang.startsWith('/edit');
          %>
          <% if (showLogo) { %>
            <a href="/<%= lang %>/" class="logo-link">

            </a>
          <% } %>
        </div>

        <nav class="header-menu">
          <ul>
            <li><a href="/<%= lang %>/web-tools">웹 도구</a></li>
            <li><a href="/<%= lang %>/tutorials">튜토리얼</a></li>
            <li><a href="/<%= lang %>/resources">자료실</a></li>
            <li><a href="/<%= lang %>/faq">FAQ</a></li>
          </ul>
        </nav>
        
        <div class="right-controls">
          <div class="language-dropdown">
            <button id="langToggle" class="lang-btn">
              <%
                let flagCode = lang;
                switch(lang) {
                  case 'ko': flagCode = 'kr'; break;
                  case 'en': flagCode = 'gb'; break;
                  case 'zh': flagCode = 'cn'; break;
                  case 'ja': flagCode = 'jp'; break;
                  case 'fr': flagCode = 'fr'; break;
                  default: flagCode = 'kr';
                }
              %>
              <span class="fi fi-<%= flagCode %>"></span>
              <i class="fas fa-caret-down"></i>
            </button>
            <ul id="langMenu" class="lang-menu">
              <%
                const currentPathWithoutLang = currentPath.replace(/^\/(ko|en|fr|zh|ja)/, '');
              %>
              <% supportedLangs.forEach(langCode => { %>
                <li>
                  <a href="/<%= langCode %><%= currentPathWithoutLang %>"
                    class="lang-option <%= langCode === lang ? 'active-lang' : '' %>">
                    <span class="fi fi-<%= (langCode === 'ko' ? 'kr' : (langCode === 'en' ? 'gb' : (langCode === 'zh' ? 'cn' : (langCode === 'ja' ? 'jp' : langCode)))) %>"></span>
                    <%= {ko: '한국어', en: 'English', fr: 'Français', zh: '简体中文', ja: '日本語'}[langCode] %>
                  </a>
                </li>
              <% }); %>
            </ul>
          </div>

          <div class="light-switch" role="switch" aria-checked="false" aria-label="다크 모드 전환" tabindex="0" id="mode-toggle-accessible">
            <span class="switch-label"><span class="switch-handle"></span></span>
          </div>
        </div>
      </div>
    </div>

  </div>

  <script src="/assets/js/header.js"></script>
  <script src="/assets/js/global.js"></script>



<script>
document.addEventListener('scroll', () => {
  const scrollY = window.scrollY;
  const header = document.querySelector('.header-top');

  // 배경 변화
  const maxScroll = 300;
  const percent = Math.min(scrollY / maxScroll, 1);
  const start = Math.floor(80 - 80 * percent);
  const mid = Math.floor(95 - 95 * percent);
  const end = Math.floor(100 - 100 * percent);

  header.style.background = `
    linear-gradient(to right,
      rgba(0,0,0,0) ${start}%,
      rgba(0,0,0,0.3) ${mid}%,
      rgba(0,0,0,0.9) ${end}%,
      rgba(0,0,0,1) 100%
    )
  `;

  // 색상 토글
  if (percent > 0.2) {
    header.classList.add('scrolled');
  } else {
    header.classList.remove('scrolled');
  }
});
</script>