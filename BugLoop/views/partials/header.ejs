<div class="full-header-container" style="z-index:20000;">
  <style>
    /* ========== ìƒë‹¨ SNS ë°” ========== */
    .top-social-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 24px;
      background: var(--panel-2);
      border-bottom: 1px solid var(--border);
      font-size: 0.9rem;
      color: var(--ink-2);
    }

    .top-social-bar .left-text {
      font-weight: 600;
      color: var(--ink);
      letter-spacing: 0.2px;
    }

    .top-social-bar .social-icons {
      display: flex;
      align-items: center;
      gap: 18px;
    }

    .top-social-bar .social-icons a {
      color: var(--ink-2);
      font-size: 1.1rem;
      transition: color 0.25s ease;
    }

    .top-social-bar .social-icons a:hover {
      color: var(--accent);
    }

    /* ========== ê¸°ì¡´ hint bubble ì½”ë“œ ìœ ì§€ ========== */
    .hint-bubble {
      position: absolute;
      top: 36px;
      left: 60px;
      display: inline-flex;
      align-items: center;
      background: #ff4d6d;
      color: #fff;
      font-size: 0.85rem;
      font-weight: 500;
      padding: 8px 12px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(255, 77, 109, 0.3);
      white-space: nowrap;
      z-index: 2147483647;
      animation: bubbleFadeIn 0.25s ease forwards;
    }

    .hint-bubble::after {
      content: "";
      position: absolute;
      top: -8px;
      left: 20px;
      border-width: 0 8px 8px 8px;
      border-style: solid;
      border-color: transparent transparent #ff4d6d transparent;
    }

    .hint-bubble .hint-close {
      all: unset;
      cursor: pointer;
      margin-left: 8px;
      font-size: 14px;
      font-weight: bold;
      color: #fff;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      width: 18px;
      height: 18px;
      display: flex;
      justify-content: center;
      align-items: center;
      transition: background 0.15s ease;
    }

    .hint-bubble .hint-close:hover {
      background: rgba(255, 255, 255, 0.35);
    }

    @keyframes bubbleFadeIn {
      0% { opacity: 0; transform: translateY(-5px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    .main-menu-container {
      overflow: auto !important;
      -webkit-overflow-scrolling: touch;
      overscroll-behavior: contain;
    }

    .hint-bubble {
      position: fixed;
      top: -9999px;
      left: -9999px;
      z-index: 2147483647;
      pointer-events: none;
    }
    .hint-bubble .hint-close {
      pointer-events: auto;
    }

    .menu-item-wrapper.hardware-wrapper {
      position: relative;
      z-index: 10;
    }

    /* ë°˜ì‘í˜•: ëª¨ë°”ì¼ì—ì„œ í…ìŠ¤íŠ¸ ìˆ¨ê¹€ */
    @media (max-width: 640px) {
      .top-social-bar .left-text { display: none; }
      .top-social-bar { justify-content: center; }
    }
  </style>

  <!-- ğŸ”¹ SNS ìƒë‹¨ ë°” -->
  <div class="top-social-bar">
    <div class="left-text">Bug Loop ê³µì‹ ì±„ë„</div>
    <div class="social-icons">
      <a href="https://www.youtube.com/@MarsKeys" target="_blank" aria-label="YouTube">
        <i class="fab fa-youtube"></i>
      </a>
      <a href="https://www.tiktok.com/@marskeys" target="_blank" aria-label="TikTok">
        <i class="fab fa-tiktok"></i>
      </a>
      <a href="https://www.instagram.com/marskeys" target="_blank" aria-label="Instagram">
        <i class="fab fa-instagram"></i>
      </a>
    </div>
  </div>

  <!-- ğŸ”¹ ê¸°ì¡´ header-top (ì „ì²´ ìœ ì§€) -->
  <div class="header-top">
    <div class="top-controls">
      <div class="left-controls">
        <%
          const pathWithoutLang = currentPath.replace(/^\/(ko|en|fr|zh|ja)/, '');
          const showLogo = ['/signup', '/editor', '/login', '/write'].includes(pathWithoutLang) ||
                           pathWithoutLang.startsWith('/post') ||
                           pathWithoutLang.startsWith('/edit');
        %>
        <% if (showLogo) { %>
          <a href="/<%= lang %>/" class="logo-link" data-panel-link aria-label="BugLoop í™ˆ"></a>
        <% } %>
      </div>

      <nav class="header-menu" aria-label="ì£¼ ë©”ë‰´">
        <ul class="main-menu-container">
          <!-- âœ… í•˜ë“œì›¨ì–´ ì¹´í…Œê³ ë¦¬ -->
          <li class="menu-item-wrapper hardware-wrapper">
            <span class="menu-label" id="hardware-label">ì»´í“¨í„° í•˜ë“œì›¨ì–´</span>
            <ul class="submenu">
              <li><a href="/<%= lang %>/hardware/cpu" data-panel-link>CPU</a></li>
              <li><a href="/<%= lang %>/hardware/gpu" data-panel-link>GPU</a></li>
              <li><a href="/<%= lang %>/hardware/ram" data-panel-link>ë©”ëª¨ë¦¬(RAM)</a></li>
              <li><a href="/<%= lang %>/hardware/storage" data-panel-link>ì €ì¥ì¥ì¹˜(SSD/HDD)</a></li>
              <li><a href="/<%= lang %>/hardware/motherboard" data-panel-link>ë©”ì¸ë³´ë“œ</a></li>
              <li><a href="/<%= lang %>/hardware/psu" data-panel-link>íŒŒì›Œì„œí”Œë¼ì´(PSU)</a></li>
              <li><a href="/<%= lang %>/hardware/case" data-panel-link>ì¼€ì´ìŠ¤</a></li>
              <li><a href="/<%= lang %>/hardware/cooling" data-panel-link>ì¿¨ë§(ê³µë­/ìˆ˜ë­)</a></li>
              <li><a href="/<%= lang %>/hardware/monitor" data-panel-link>ëª¨ë‹ˆí„°</a></li>
              <li><a href="/<%= lang %>/hardware/peripherals" data-panel-link>ì£¼ë³€ê¸°ê¸°</a></li>
              <li><a href="/<%= lang %>/hardware/network" data-panel-link>ë„¤íŠ¸ì›Œí¬/Wi-Fi</a></li>
              <li><a href="/<%= lang %>/hardware/os" data-panel-link>ìš´ì˜ì²´ì œ/ë“œë¼ì´ë²„</a></li>
              <li><a href="/<%= lang %>/hardware/tools" data-panel-link>ë²¤ì¹˜ë§ˆí¬</a></li>
              <li><a href="/<%= lang %>/hardware/buying-guide" data-panel-link>êµ¬ë§¤ê°€ì´ë“œ</a></li>
            </ul>
          </li>

          <!-- âœ… í”„ë¡ íŠ¸ì—”ë“œ -->
          <li class="menu-item-wrapper">
            <span class="menu-label">í”„ë¡ íŠ¸ì—”ë“œ</span>
            <ul class="submenu">
              <li><a href="/<%= lang %>/frontend/html" data-panel-link>HTML</a></li>
              <li><a href="/<%= lang %>/frontend/css" data-panel-link>CSS</a></li>
              <li><a href="/<%= lang %>/frontend/javascript" data-panel-link>JavaScript</a></li>
              <li><a href="/<%= lang %>/frontend/react" data-panel-link>React</a></li>
              <li><a href="/<%= lang %>/frontend/vue" data-panel-link>Vue</a></li>
              <li><a href="/<%= lang %>/frontend/tailwind" data-panel-link>Tailwind</a></li>
            </ul>
          </li>

          <!-- âœ… ë°±ì—”ë“œ -->
          <li class="menu-item-wrapper">
            <span class="menu-label">ë°±ì—”ë“œ</span>
            <ul class="submenu">
              <li><a href="/<%= lang %>/backend/nodejs" data-panel-link>Node.js</a></li>
              <li><a href="/<%= lang %>/backend/express" data-panel-link>Express</a></li>
              <li><a href="/<%= lang %>/backend/django" data-panel-link>Django</a></li>
              <li><a href="/<%= lang %>/backend/flask" data-panel-link>Flask</a></li>
              <li><a href="/<%= lang %>/backend/spring" data-panel-link>Spring</a></li>
            </ul>
          </li>

          <!-- âœ… ê¸°íƒ€ -->
          <li class="menu-item-wrapper">
            <span class="menu-label">ê¸°íƒ€</span>
            <ul class="submenu">
              <li><a href="/<%= lang %>/etc/webperformance" data-panel-link>ì›¹ ì„±ëŠ¥ ìµœì í™”</a></li>
              <li><a href="/<%= lang %>/etc/aria" data-panel-link>ì ‘ê·¼ì„±(ARIA)</a></li>
              <li><a href="/<%= lang %>/etc/electron" data-panel-link>Electron</a></li>
            </ul>
          </li>
        </ul>
      </nav>

      <div class="right-controls" id="right-controls">
        <div class="language-dropdown">
          <button id="langToggle" class="lang-btn" aria-haspopup="menu" aria-expanded="false" aria-controls="langMenu">
            <%
              let flagCode = lang;
              switch(lang) {
                case 'ko': flagCode = 'kr'; break;
                case 'en': flagCode = 'gb'; break;
                case 'zh': flagCode = 'cn'; break;
                case 'ja': flagCode = 'jp'; break;
                case 'fr': flagCode = 'fr'; break;
                default: flagCode = 'kr';
              }
            %>
            <span class="fi fi-<%= flagCode %>" aria-hidden="true"></span>
            <i class="fas fa-caret-down" aria-hidden="true"></i>
          </button>
          <ul id="langMenu" class="lang-menu" role="menu">
            <% supportedLangs.forEach(langCode => { %>
              <li>
                <a href="/<%= langCode %><%= currentPathWithoutLang %>"
                   class="lang-option <%= langCode === lang ? 'active-lang' : '' %>">
                  <span class="fi fi-<%= (langCode === 'ko' ? 'kr' : (langCode === 'en' ? 'gb' : (langCode === 'zh' ? 'cn' : (langCode === 'ja' ? 'jp' : langCode)))) %>"></span>
                  <%= {ko: 'í•œêµ­ì–´', en: 'English', fr: 'FranÃ§ais', zh: 'ç®€ä½“ä¸­æ–‡', ja: 'æ—¥æœ¬èª'}[langCode] %>
                </a>
              </li>
            <% }); %>
          </ul>
        </div>

        <div class="light-switch" role="switch" aria-checked="false" aria-label="ë‹¤í¬ ëª¨ë“œ ì „í™˜" tabindex="0" id="mode-toggle-accessible">
          <span class="switch-label"><span class="switch-handle"></span></span>
        </div>
      </div>
    </div>
  </div>
</div>
