<div class="full-header-container" style="z-index:20000;">
  <style>
    /* ===== ë§í’ì„ : ê¸°ë³¸ì€ bodyë¡œ í¬í„¸ë˜ì–´ fixed ë°°ì¹˜ ===== */
    .hint-bubble {
      position: fixed;                  /* âœ… viewport ê¸°ì¤€ */
      top: -9999px; left: -9999px;      /* ì´ˆê¸° ì˜¤í”„ìŠ¤í¬ë¦° */
      display: inline-flex;
      align-items: center;
      background: #ff4d6d;
      color: #fff;
      font-size: 0.85rem;
      font-weight: 500;
      padding: 8px 12px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(255,77,109,.3);
      white-space: nowrap;
      z-index: 2147483647 !important;   /* ìµœìƒë‹¨ ë³´ì¥ */
      animation: bubbleFadeIn .25s ease forwards;
      pointer-events: auto;
    }
    /* ë§í’ì„  ê¼¬ë¦¬ (í¬í„¸ í›„ì—ë„ ì •ìƒ í‘œì‹œ) */
    .hint-bubble::after{
      content:"";
      position:absolute;
      top: -8px;
      left: var(--tail-left, 20px);     /* JSê°€ ê³„ì‚°í•´ì„œ ë„£ì–´ì¤Œ */
      border-width:0 8px 8px 8px;
      border-style:solid;
      border-color:transparent transparent #ff4d6d transparent;
    }
    /* ë‹«ê¸° ë²„íŠ¼ */
    .hint-bubble .hint-close{
      all: unset; cursor: pointer; margin-left: 8px;
      font-size: 14px; font-weight: 700; color:#fff;
      background: rgba(255,255,255,.2); border-radius: 50%;
      width: 18px; height: 18px; display:flex; align-items:center; justify-content:center;
      transition: background .15s ease;
    }
    .hint-bubble .hint-close:hover{ background: rgba(255,255,255,.35); }
  
    /* ë¶€ë“œëŸ¬ìš´ ë“±ì¥ */
    @keyframes bubbleFadeIn{
      0%{ opacity:0; transform: translateY(-5px); }
      100%{ opacity:1; transform: translateY(0); }
    }
  
    /* =========================================
       í—¤ë” ê°€ë¡œ ìŠ¤í¬ë¡¤ ìœ ì§€ + ìŠ¤í¬ë¡¤ë°” ìˆ¨ê¹€
       ========================================= */
    .header-menu{
      overflow-x: auto;                 /* âœ… ê°€ë¡œ ìŠ¤í¬ë¡¤ ìœ ì§€ */
      overflow-y: visible;              /* âœ… ì„¸ë¡œëŠ” ì—´ì–´ë‘  */
      -webkit-overflow-scrolling: touch;
      position: relative;
    }
    .header-menu::-webkit-scrollbar{ display:none; } /* Chrome/Safari */
    .header-menu{ scrollbar-width: none; -ms-overflow-style: none; } /* Firefox/IE */
  
    .main-menu-container{
      display:flex; flex-wrap: nowrap; width:max-content;
      overflow: visible !important;
    }
  
    /* ê¸°ì¤€ ë¼ë²¨ ìš”ì†Œ(í•˜ë“œì›¨ì–´) ìª½ì€ ê¸°ì¤€ì ë§Œ ë‘ë©´ ë¨ */
    .menu-item-wrapper.hardware-wrapper{
      position: relative;
      overflow: visible !important;
      z-index: 10;
    }
  
    /* í˜¹ì‹œ ëª¨ë¥¼ ì¡°ìƒ í´ë¦¬í•‘ ì™„í™”(ì•ˆì „ë§) */
    .full-header-container, .header-top, .top-controls{
      overflow: visible !important;
      position: relative;
    }
  </style>
  
  
  
  <div class="header-top">
    <div class="top-controls">
      <div class="left-controls">
        <%
          const pathWithoutLang = currentPath.replace(/^\/(ko|en|fr|zh|ja)/, '');
          const showLogo = ['/signup', '/editor', '/login', '/write'].includes(pathWithoutLang) ||
                           pathWithoutLang.startsWith('/post') ||
                           pathWithoutLang.startsWith('/edit');
        %>
        <% if (showLogo) { %>
          <!-- âœ… í™ˆì€ íŒ¨ë„ë§Œ êµì²´ -->
          <a href="/<%= lang %>/" class="logo-link" data-panel-link aria-label="BugLoop í™ˆ"></a>
        <% } %>
      </div>

      <nav class="header-menu" aria-label="ì£¼ ë©”ë‰´">
        <ul class="main-menu-container">

           <!-- âœ… ìƒˆ ì„¹ì…˜: ì»´í“¨í„° í•˜ë“œì›¨ì–´ -->
           <li class="menu-item-wrapper hardware-wrapper">
            <span class="menu-label" id="hardware-label">ì»´í“¨í„° í•˜ë“œì›¨ì–´</span>
              <!-- ğŸ”” ë¶‰ì€ ë§í’ì„  -->
<div class="hint-bubble" id="hardware-hint" role="tooltip" aria-hidden="false"
     style="display:inline-flex; outline:2px dashed rgba(255,0,0,.4);">
  <span class="hint-text">ì»´í“¨í„° ì‚´ ë•Œ ì°¸ê³ í•˜ë©´ ë„ì›€ë¼ìš”!</span>
  <button class="hint-close" type="button" aria-label="ë‹«ê¸°">Ã—</button>
</div>
            <ul class="submenu">
              <li><a href="/<%= lang %>/hardware/cpu"           data-panel-link>CPU</a></li>
              <li><a href="/<%= lang %>/hardware/gpu"           data-panel-link>GPU</a></li>
              <li><a href="/<%= lang %>/hardware/ram"           data-panel-link>ë©”ëª¨ë¦¬(RAM)</a></li>
              <li><a href="/<%= lang %>/hardware/storage"       data-panel-link>ì €ì¥ì¥ì¹˜(SSD/HDD)</a></li>
              <li><a href="/<%= lang %>/hardware/motherboard"   data-panel-link>ë©”ì¸ë³´ë“œ</a></li>
              <li><a href="/<%= lang %>/hardware/psu"           data-panel-link>íŒŒì›Œì„œí”Œë¼ì´(PSU)</a></li>
              <li><a href="/<%= lang %>/hardware/case"          data-panel-link>ì¼€ì´ìŠ¤</a></li>
              <li><a href="/<%= lang %>/hardware/cooling"       data-panel-link>ì¿¨ë§(ê³µë­/ìˆ˜ë­)</a></li>
              <li><a href="/<%= lang %>/hardware/monitor"       data-panel-link>ëª¨ë‹ˆí„°</a></li>
              <li><a href="/<%= lang %>/hardware/peripherals"   data-panel-link>ì£¼ë³€ê¸°ê¸°(í‚¤ë³´ë“œ/ë§ˆìš°ìŠ¤/ì˜¤ë””ì˜¤)</a></li>
              <li><a href="/<%= lang %>/hardware/network"       data-panel-link>ë„¤íŠ¸ì›Œí¬/Wi-Fi</a></li>
              <li><a href="/<%= lang %>/hardware/os"            data-panel-link>ìš´ì˜ì²´ì œ/ë“œë¼ì´ë²„</a></li>
              <li><a href="/<%= lang %>/hardware/tools"         data-panel-link>ë²¤ì¹˜ë§ˆí¬/ëª¨ë‹ˆí„°ë§</a></li>
              <li><a href="/<%= lang %>/hardware/buying-guide"  data-panel-link>êµ¬ë§¤ê°€ì´ë“œ(ì˜ˆì‚°/ìš©ë„)</a></li>
            </ul>
          </li>
          <!-- ğŸ”š ìƒˆ ì„¹ì…˜ ë -->
           
          <li class="menu-item-wrapper">
            <span class="menu-label">í”„ë¡ íŠ¸ì—”ë“œ</span>
            <ul class="submenu">
              <li><a href="/<%= lang %>/frontend/html"        data-panel-link>HTML</a></li>
              <li><a href="/<%= lang %>/frontend/css"         data-panel-link>CSS</a></li>
              <li><a href="/<%= lang %>/frontend/javascript"  data-panel-link>JavaScript</a></li>
              <li><a href="/<%= lang %>/frontend/react"       data-panel-link>React</a></li>
              <li><a href="/<%= lang %>/frontend/vue"         data-panel-link>Vue</a></li>
              <li><a href="/<%= lang %>/frontend/angular"     data-panel-link>Angular</a></li>
              <li><a href="/<%= lang %>/frontend/svelte"      data-panel-link>Svelte</a></li>
              <li><a href="/<%= lang %>/frontend/tailwind"    data-panel-link>Tailwind</a></li>
              <li><a href="/<%= lang %>/frontend/bootstrap"   data-panel-link>Bootstrap</a></li>
              <li><a href="/<%= lang %>/frontend/webpack"     data-panel-link>Webpack</a></li>
              <li><a href="/<%= lang %>/frontend/vite"        data-panel-link>Vite</a></li>
              <li><a href="/<%= lang %>/frontend/pwa"         data-panel-link>PWA</a></li>
            </ul>
          </li>

          <li class="menu-item-wrapper">
            <span class="menu-label">ë°±ì—”ë“œ</span>
            <ul class="submenu">
              <li><a href="/<%= lang %>/backend/nodejs"       data-panel-link>Node.js</a></li>
              <li><a href="/<%= lang %>/backend/express"      data-panel-link>Express</a></li>
              <li><a href="/<%= lang %>/backend/django"       data-panel-link>Django</a></li>
              <li><a href="/<%= lang %>/backend/flask"        data-panel-link>Flask</a></li>
              <li><a href="/<%= lang %>/backend/fastapi"      data-panel-link>FastAPI</a></li>
              <li><a href="/<%= lang %>/backend/spring"       data-panel-link>Spring</a></li>
              <li><a href="/<%= lang %>/backend/php"          data-panel-link>PHP</a></li>
              <li><a href="/<%= lang %>/backend/laravel"      data-panel-link>Laravel</a></li>
              <li><a href="/<%= lang %>/backend/rails"        data-panel-link>Rails</a></li>
              <li><a href="/<%= lang %>/backend/go"           data-panel-link>Go</a></li>
              <li><a href="/<%= lang %>/backend/restapi"      data-panel-link>REST API</a></li>
              <li><a href="/<%= lang %>/backend/graphql"      data-panel-link>GraphQL</a></li>
            </ul>
          </li>

          <li class="menu-item-wrapper">
            <span class="menu-label">ë°ì´í„°ë² ì´ìŠ¤</span>
            <ul class="submenu">
              <li><a href="/<%= lang %>/database/mysql"        data-panel-link>MySQL</a></li>
              <li><a href="/<%= lang %>/database/postgresql"   data-panel-link>PostgreSQL</a></li>
              <li><a href="/<%= lang %>/database/mongodb"      data-panel-link>MongoDB</a></li>
              <li><a href="/<%= lang %>/database/redis"        data-panel-link>Redis</a></li>
              <li><a href="/<%= lang %>/database/oracle"       data-panel-link>Oracle</a></li>
              <li><a href="/<%= lang %>/database/sqlite"       data-panel-link>SQLite</a></li>
              <li><a href="/<%= lang %>/database/elasticsearch"data-panel-link>ElasticSearch</a></li>
              <li><a href="/<%= lang %>/database/influxdb"     data-panel-link>InfluxDB</a></li>
              <li><a href="/<%= lang %>/database/timescaledb"  data-panel-link>TimescaleDB</a></li>
            </ul>
          </li>

          <li class="menu-item-wrapper">
            <span class="menu-label">ë„¤íŠ¸ì›Œí¬/ì¸í”„ë¼</span>
            <ul class="submenu">
              <li><a href="/<%= lang %>/network/http"        data-panel-link>HTTP</a></li>
              <li><a href="/<%= lang %>/network/https"       data-panel-link>HTTPS</a></li>
              <li><a href="/<%= lang %>/network/dns"         data-panel-link>DNS</a></li>
              <li><a href="/<%= lang %>/network/tcpip"       data-panel-link>TCP/IP</a></li>
              <li><a href="/<%= lang %>/network/websocket"   data-panel-link>WebSocket</a></li>
              <li><a href="/<%= lang %>/network/cdn"         data-panel-link>CDN</a></li>
              <li><a href="/<%= lang %>/network/docker"      data-panel-link>Docker</a></li>
              <li><a href="/<%= lang %>/network/kubernetes"  data-panel-link>Kubernetes</a></li>
              <li><a href="/<%= lang %>/network/aws"         data-panel-link>AWS</a></li>
              <li><a href="/<%= lang %>/network/gcp"         data-panel-link>GCP</a></li>
              <li><a href="/<%= lang %>/network/azure"       data-panel-link>Azure</a></li>
              <li><a href="/<%= lang %>/network/nginx"       data-panel-link>Nginx</a></li>
              <li><a href="/<%= lang %>/network/apache"      data-panel-link>Apache</a></li>
            </ul>
          </li>

          <li class="menu-item-wrapper">
            <span class="menu-label">ë³´ì•ˆ</span>
            <ul class="submenu">
              <li><a href="/<%= lang %>/security/jwt"          data-panel-link>JWT</a></li>
              <li><a href="/<%= lang %>/security/oauth2"       data-panel-link>OAuth2</a></li>
              <li><a href="/<%= lang %>/security/xss"          data-panel-link>XSS</a></li>
              <li><a href="/<%= lang %>/security/csrf"         data-panel-link>CSRF</a></li>
              <li><a href="/<%= lang %>/security/sqlinjection" data-panel-link>SQL Injection</a></li>
              <li><a href="/<%= lang %>/security/https"        data-panel-link>HTTPS</a></li>
              <li><a href="/<%= lang %>/security/tls"          data-panel-link>TLS</a></li>
              <li><a href="/<%= lang %>/security/waf"          data-panel-link>WAF</a></li>
              <li><a href="/<%= lang %>/security/vpn"          data-panel-link>VPN</a></li>
              <li><a href="/<%= lang %>/security/ddos"         data-panel-link>DDoS</a></li>
              <li><a href="/<%= lang %>/security/owasptop10"   data-panel-link>OWASP Top 10</a></li>
            </ul>
          </li>

          <li class="menu-item-wrapper">
            <span class="menu-label">DevOps/ìš´ì˜</span>
            <ul class="submenu">
              <li><a href="/<%= lang %>/devops/git"            data-panel-link>Git</a></li>
              <li><a href="/<%= lang %>/devops/githubactions"  data-panel-link>GitHub Actions</a></li>
              <li><a href="/<%= lang %>/devops/jenkins"        data-panel-link>Jenkins</a></li>
              <li><a href="/<%= lang %>/devops/cicd"           data-panel-link>CI/CD</a></li>
              <li><a href="/<%= lang %>/devops/prometheus"     data-panel-link>Prometheus</a></li>
              <li><a href="/<%= lang %>/devops/grafana"        data-panel-link>Grafana</a></li>
              <li><a href="/<%= lang %>/devops/elkstack"       data-panel-link>ELK Stack</a></li>
              <li><a href="/<%= lang %>/devops/bluegreen"      data-panel-link>Blue-Green</a></li>
            </ul>
          </li>

          <li class="menu-item-wrapper">
            <span class="menu-label">ê¸°íƒ€</span>
            <ul class="submenu">
              <li><a href="/<%= lang %>/etc/webperformance"   data-panel-link>ì›¹ ì„±ëŠ¥ ìµœì í™”</a></li>
              <li><a href="/<%= lang %>/etc/lighthouse"       data-panel-link>Lighthouse</a></li>
              <li><a href="/<%= lang %>/etc/corewebvitals"    data-panel-link>Core Web Vitals</a></li>
              <li><a href="/<%= lang %>/etc/aria"             data-panel-link>ARIA</a></li>
              <li><a href="/<%= lang %>/etc/webassembly"      data-panel-link>WebAssembly</a></li>
              <li><a href="/<%= lang %>/etc/electron"         data-panel-link>Electron</a></li>
              <li><a href="/<%= lang %>/etc/reactnative"      data-panel-link>React Native</a></li>
            </ul>
          </li>
        </ul>
      </nav>

      <div class="right-controls" id="right-controls">
        <div class="language-dropdown">
          <button id="langToggle" class="lang-btn" aria-haspopup="menu" aria-expanded="false" aria-controls="langMenu">
            <%
              let flagCode = lang;
              switch(lang) {
                case 'ko': flagCode = 'kr'; break;
                case 'en': flagCode = 'gb'; break;
                case 'zh': flagCode = 'cn'; break;
                case 'ja': flagCode = 'jp'; break;
                case 'fr': flagCode = 'fr'; break;
                default: flagCode = 'kr';
              }
            %>
            <span class="fi fi-<%= flagCode %>" aria-hidden="true"></span>
            <i class="fas fa-caret-down" aria-hidden="true"></i>
          </button>
          <ul id="langMenu" class="lang-menu" role="menu">
            <%
              const currentPathWithoutLang = currentPath.replace(/^\/(ko|en|fr|zh|ja)/, '');
            %>
            <% supportedLangs.forEach(langCode => { %>
              <li role="none">
                <!-- ğŸ”¸ ì–¸ì–´ ë³€ê²½ì€ ì „ì²´ ìƒˆë¡œê³ ì¹¨ ìœ ì§€ (data-panel-link ì¶”ê°€ ì•ˆ í•¨) -->
                <a href="/<%= langCode %><%= currentPathWithoutLang %>"
                   class="lang-option <%= langCode === lang ? 'active-lang' : '' %>"
                   role="menuitem">
                  <span class="fi fi-<%= (langCode === 'ko' ? 'kr' : (langCode === 'en' ? 'gb' : (langCode === 'zh' ? 'cn' : (langCode === 'ja' ? 'jp' : langCode)))) %>"></span>
                  <%= {ko: 'í•œêµ­ì–´', en: 'English', fr: 'FranÃ§ais', zh: 'ç®€ä½“ä¸­æ–‡', ja: 'æ—¥æœ¬èª'}[langCode] %>
                </a>
              </li>
            <% }); %>
          </ul>
        </div>

        <div class="light-switch" role="switch" aria-checked="false" aria-label="ë‹¤í¬ ëª¨ë“œ ì „í™˜" tabindex="0" id="mode-toggle-accessible">
          <span class="switch-label"><span class="switch-handle"></span></span>
        </div>
      </div>
    </div>
  </div>

  <aside class="side-panel main-panel-only">
    <div class="sidebar-wrapper">
      <nav class="vscode-sidebar" aria-label="íŒ¨ë„ ì‚¬ì´ë“œë°”" role="tablist">
        <a href="#" class="sidebar-icon toggle-extension blink-highlight" title="íŒ¨ë„ ì—´ê¸°/ë‹«ê¸°" aria-label="íŒ¨ë„ ì—´ê¸°/ë‹«ê¸°">
          <i class="fas fa-chevron-left" aria-hidden="true"></i>
        </a>

        <a href="/<%= lang %>/" class="sidebar-icon logo" data-tab="home" data-panel-link title="BugLoop í™ˆ" aria-label="BugLoop í™ˆ" aria-selected="false">
          <img src="/assets/images/BugLoop.png" alt="BugLoop">
        </a>
        <a href="/<%= lang %>/" class="sidebar-icon" data-tab="home" data-panel-link title="í™ˆ" aria-selected="false">
          <i class="fas fa-home" aria-hidden="true"></i>
        </a>

        <a href="#" class="sidebar-icon" data-tab="profile" title="í”„ë¡œí•„" aria-selected="false" role="tab">
          <i class="fas fa-user" aria-hidden="true"></i>
        </a>
        <a href="#" class="sidebar-icon" data-tab="search" title="ê²€ìƒ‰" aria-selected="false" role="tab">
          <i class="fas fa-search" aria-hidden="true"></i>
        </a>

        <% if (user) { %>
          <% if (Number(user.is_admin) === 1) { %>
            <!-- ğŸ”¸ ê¸€ì“°ê¸°ëŠ” ì „ì²´ë·°ê°€ ì•ˆì „ -->
            <a href="/<%= lang %>/write" class="sidebar-icon" data-tab="write" title="ê¸€ì“°ê¸°" aria-selected="false">
              <i class="fas fa-pen" aria-hidden="true"></i>
            </a>
          <% } %>
        <% } %>

        <a href="#" class="sidebar-icon" data-tab="settings" title="ì„¤ì •" aria-selected="false" aria-pressed="false" role="button">
          <i class="fas fa-cog" aria-hidden="true"></i>
        </a>
      </nav>

      <div class="sidebar-extension-panel">
        <div class="panel-logo">
          <img src="/assets/images/BugLoop2.png" alt="BugLoop" loading="lazy" />
        </div>
        <div class="tab-container"></div>
        <!-- âœ… í”„ë¡œí•„ íƒ­: ì¦ëª…ì‚¬ì§„ ëŠë‚Œ About ì¹´ë“œ -->
        <div class="tab-content" data-tab="profile" style="display: none;">
          <%- include('./profile', { locale }) %>
        </div>

        <% if (typeof posts !== 'undefined') { %>
          <!-- âœ… ì„œì¹˜ íƒ­: ìƒë‹¨ ê²€ìƒ‰ë°” + í…Œì´ë¸” í…œí”Œë¦¿ -->
          <div class="tab-content" data-tab="search" style="display: none;">
            <section class="search-tab">
             
              <!-- ìˆ¨ê²¨ì§„ í…œí”Œë¦¿: header.jsê°€ í´ë¡  í›„ #sidebar-tableë¡œ ì´ë¦„ ë°”ê¿” ì‚¬ìš© -->
              <div id="sidebar-table-template" data-lang="<%= lang %>">
                <%- include('table') %>
              </div>
            </section>
          </div>
        <% } %>

        <div class="panel-footer">
          <% if (user) { %>
            <div class="greeting" style="text-align: center; margin-top: 10px; font-weight: bold;">
              <%= user.nickname %>ë‹˜, ì•ˆë…•í•˜ì„¸ìš”!
            </div>
          <% } %>
          <% if (currentPath !== '/signup' && currentPath !== '/login') { %>
            <div class="auth-buttons">
              <% if (user) { %>
                <!-- ğŸ”¸ ë¡œê·¸ì•„ì›ƒì€ ì „ì²´ ë‚´ë¹„ê²Œì´ì…˜ ìœ ì§€ -->
                <a href="/<%= lang %>/logout" class="auth-btn logout">ë¡œê·¸ì•„ì›ƒ</a>
              <% } else { %>
                <a class="auth-btn signup" onclick="return false;" style="pointer-events: none; opacity: 0.5; cursor: not-allowed;">íšŒì›ê°€ì…</a>
                <button class="auth-btn login" id="login" type="button">ë¡œê·¸ì¸</button>
              <% } %>
            </div>
          <% } %>

          <div id="login-form-container" class="login-form-container hidden">
            <form id="login-form" method="POST" action="/login">
              <input type="text" name="id" placeholder="ì•„ì´ë””" required />
              <input type="password" name="password" placeholder="ë¹„ë°€ë²ˆí˜¸" required />
              <button type="submit">ë¡œê·¸ì¸</button>
            </form>
          </div>

          <div class="real-footer">
            <small>Â© 2025 Bug Loop</small>
          </div>
        </div>
      </div>
    </div>
  </aside>
</div>

<!-- ===== ìƒë‹¨ ë©”ë‰´ í˜„ì¬ ê²½ë¡œ í•˜ì´ë¼ì´íŠ¸ ===== -->
<script>
  (function(){
    var path = location.pathname.replace(/\/$/, '');
    document.querySelectorAll('.submenu a').forEach(function(a){
      var href = (a.getAttribute('href') || '').replace(/\/$/, '');
      if (href === path) {
        a.classList.add('active');
        var label = a.closest('.menu-item-wrapper')?.querySelector('.menu-label');
        if (label) label.classList.add('active-label');
      }
    });
  })();
</script>

<!-- ===== í™ˆ ì•„ì´ì½˜/ë¡œê³  í™œì„±í™”: ê²½ë¡œ ê¸°ì¤€ ===== -->
<script>
  (() => {
    const homeEls = document.querySelectorAll('.vscode-sidebar a.sidebar-icon[data-tab="home"]:not(.toggle-extension)');
    const stripLang = (p) => {
      const path = (p || location.pathname).replace(/[#?].*$/, '');
      const noLang = path.replace(/^\/(ko|en|fr|zh|ja)(?:\/|$)/, '');
      return noLang === '' ? '/' : noLang.replace(/\/$/, '') || '/';
    };
    const isHomePath = (p) => stripLang(p) === '/';
    const setHomeActive = (flag) => {
      homeEls.forEach(el => {
        el.classList.toggle('active', flag);
        el.querySelector('i')?.classList.toggle('active', flag);
      });
    };
    const sync = () => setHomeActive(isHomePath(location.pathname));

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', sync, { once: true });
    } else {
      sync();
    }

    document.addEventListener('click', (e) => {
      const a = e.target.closest('a[data-panel-link]');
      if (!a) return;
      const pn = new URL(a.getAttribute('href') || '/', location.origin).pathname;
      setHomeActive(isHomePath(pn));
    });
    window.addEventListener('popstate', sync);

    ['pushState','replaceState'].forEach(fn => {
      const orig = history[fn];
      history[fn] = function(...args){
        const ret = orig.apply(this, args);
        window.dispatchEvent(new Event('panel:navigated'));
        return ret;
      };
    });
    window.addEventListener('panel:navigated', sync);
  })();
</script>

<script>
  (() => {
    const KEY = 'bugloop.hideHardwareHint';
    const wrapper = document.querySelector('.menu-item-wrapper.hardware-wrapper');
    if (!wrapper) return;
  
    const bubble = wrapper.querySelector('#hardware-hint');
    const label  = wrapper.querySelector('#hardware-label');
    const close  = wrapper.querySelector('.hint-close');
  
    if (!bubble || !label) return;
  
    /* --- ìœ í‹¸: í¬í„¸(teleport) - bubbleì„ bodyë¡œ ì´ë™ --- */
    const ensurePortaled = () => {
      if (bubble.parentElement !== document.body) {
        document.body.appendChild(bubble);     // âœ… ì¡°ìƒ í´ë¦¬í•‘/ìŠ¤íƒ ì™„ì „ ë¬´ë ¥í™”
      }
    };
  
    /* --- ìœ„ì¹˜ ê³ ì •(pinning): label ê¸°ì¤€ â†’ viewport ì¢Œí‘œ --- */
    const OFFSET_X = 60;  // ë„¤ê°€ ì“°ë˜ ì¢Œì¸¡ ì˜¤í”„ì…‹
    const OFFSET_Y = 8;   // ë¼ë²¨ ì•„ë˜ ê°„ê²©
    const pin = () => {
      const r = label.getBoundingClientRect();
      // ë§í’ì„  ì™¼ìª½ì€ ë¼ë²¨ì˜ left + OFFSET_X
      const left = Math.round(r.left + OFFSET_X);
      const top  = Math.round(r.bottom + OFFSET_Y);
  
      bubble.style.left = left + 'px';
      bubble.style.top  = top  + 'px';
  
      // ê¼¬ë¦¬ ìœ„ì¹˜: ë¼ë²¨ì˜ í…ìŠ¤íŠ¸ ì‹œì‘ ì§€ì  ëŒ€ë¹„ ìœ ì§€(ëŒ€ëµ 20px)
      bubble.style.setProperty('--tail-left', '20px');
    };
  
    /* --- show/hide --- */
    const show = () => {
      ensurePortaled();
      bubble.style.display = 'inline-flex';
      bubble.setAttribute('aria-hidden', 'false');
      pin();
    };
    const hide = () => {
      bubble.style.display = 'none';
      bubble.setAttribute('aria-hidden', 'true');
    };
  
    /* --- ì´ˆê¸° ìƒíƒœ --- */
    const hidden = localStorage.getItem(KEY) === '1';
    if (!hidden) show();
  
    /* --- ì¸í„°ë™ì…˜ --- */
    close?.addEventListener('click', () => {
      localStorage.setItem(KEY, '1');
      hide();
      label?.focus?.();
    });
    bubble?.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        localStorage.setItem(KEY, '1');
        hide();
        label?.focus?.();
      }
    });
  
    /* --- ë ˆì´ì•„ì›ƒ ë³€í™” ëŒ€ì‘ --- */
    const onLayout = () => {
      if (localStorage.getItem(KEY) !== '1' && bubble.style.display !== 'none') {
        ensurePortaled();
        pin();
      }
    };
    window.addEventListener('resize', onLayout);
    window.addEventListener('scroll', onLayout, { passive: true });
    window.addEventListener('panel:navigated', () => {
      if (localStorage.getItem(KEY) === '1') hide();
      else { show(); onLayout(); }
    });
  
    /* --- í°íŠ¸ ë¡œë“œ/ì•„ì´ì½˜ ë¡œë“œ ë“± ì§€ì—° ìš”ì†Œ ì´í›„ ì¬ê³„ì‚° --- */
    window.addEventListener('load', onLayout);
    // ë¼ë²¨ í…ìŠ¤íŠ¸/ìŠ¤íƒ€ì¼ ë³€ê²½ ê°ì§€í•´ì„œ ì¬í•€
    const mo = new MutationObserver(onLayout);
    mo.observe(label, { attributes: true, childList: true, subtree: true });
  })();
  </script>
  


<!-- âœ… ë©”ì¸ ë¡œì§: header.jsê°€ íŒ¨ë„/íƒ­ ìƒíƒœ(ë³µêµ¬, a11y í¬í•¨)ë¥¼ ì „ë‹´ -->
<script src="/assets/js/header.js"></script>
<script src="/assets/js/global.js"></script>
