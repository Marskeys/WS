<style>
/* ========================================= */
/* 1. âš™ï¸ CSS ë³€ìˆ˜ ì„¤ì • */
/* ========================================= */

:root {
  /* íŒ¨ë„ ë†’ì´ (ê¸°ë³¸ê°’ ë° í˜„ì¬ê°’) */
  --header-h: 30px;            /* í—¤ë” ë†’ì´ */
  --panel-h-default: 150px; /* ğŸŒŸ ë°ìŠ¤í¬íƒ‘ ì´ˆê¸°ê°’: 150px */
  --panel-h: var(--panel-h-default);

  /* ë ˆì´ì•„ì›ƒ í­ */
  --ide-w: 50px;               /* VSCode ì‚¬ì´ë“œë°”(IDE) í­ */
  --panel-w: 400px;            /* í™•ì¥ íŒ¨ë„ í­ (ë°ìŠ¤í¬íƒ‘ ê¸°ì¤€) */
  --gut: 2.5vw;                /* ì–‘ì˜† ì—¬ë°± ë¹„ìœ¨ */
}

/* ëª¨ë°”ì¼ ê¸°ë³¸ ë†’ì´ ì„¤ì • (max-width: 768px) */
@media (max-width: 768px) {
  :root {
    /* ğŸŒŸ ëª¨ë°”ì¼ ì´ˆê¸° ë†’ì´: JSì—ì„œ ê³„ì‚°ëœ 220pxë¡œ ê³ ì •ë©ë‹ˆë‹¤. */
    --panel-h-default: 220px; 
    --panel-h: var(--panel-h-default);
    /* ëª¨ë°”ì¼ì—ì„œëŠ” ideì™€ panel í­ì„ 0ìœ¼ë¡œ ì„¤ì • */
    --ide-w: 0px;
    --panel-w: 0px;
  }
}

/* ========================================= */
/* 2. ğŸ—„ï¸ #mini-lecture ì»¨í…Œì´ë„ˆ (Fixed) */
/* ========================================= */

#mini-lecture {
  position: fixed;
  top: var(--header-h, 0);
  z-index: 40;
  
  /* ê¸°ë³¸ ìœ„ì¹˜ (ë‹«íŒ ìƒíƒœ) */
  left: calc(var(--ide-w) + var(--gut));
  right: var(--gut);
  
  height: var(--panel-h);
  min-height: 20px;
  
  /* ë‚´ìš©(1fr) + ë¦¬ì‚¬ì´ì €(20px) */
  display: grid;
  grid-template-rows: minmax(0, 1fr) 20px; 
  overflow: hidden;

  /* ê·¸ë¦¼ì íš¨ê³¼ */
  box-shadow:
    0 60px 140px -30px rgba(0,0,0,.70),
    0 30px 70px -20px rgba(0,0,0,.60),
    0 14px 30px -10px rgba(0,0,0,.50),
    0 2px 8px -2px rgba(0,0,0,.45),
    0 0 0 1px rgba(0,0,0,.28);
}

/* 2-1. íŒ¨ë„ ì—´ë¦¼ ìƒíƒœ (body.panel-open) - ì¼ë°˜ ì—¬ë°± */
body.panel-open #mini-lecture {
  /* ì—´ë¦° ìƒíƒœ: (IDE + íŒ¨ë„ í­) ì œì™¸í•œ ë‚˜ë¨¸ì§€ ì˜ì—­ì˜ 2.5% ì—¬ë°± */
  left: calc(var(--ide-w) + var(--panel-w) + (100vw - (var(--ide-w) + var(--panel-w))) * 0.025);
  right: calc((100vw - (var(--ide-w) + var(--panel-w))) * 0.025);
}

/* 2-2. ë°ìŠ¤í¬íƒ‘ (min-width: 769px) - ì¢Œìš° ì—¬ë°± ë„“íˆê¸° */
@media (min-width: 769px) {
  body.panel-open #mini-lecture {
    /* (IDE + íŒ¨ë„ í­) ì œì™¸í•œ ë‚˜ë¨¸ì§€ ì˜ì—­ì˜ 25% ì—¬ë°±ìœ¼ë¡œ ë” ë„“í˜ */
    left: calc(var(--ide-w) + var(--panel-w) + (100vw - (var(--ide-w) + var(--panel-w))) * 0.25);
    right: calc((100vw - (var(--ide-w) + var(--panel-w))) * 0.25);
  }
}

/* 2-3. ëª¨ë°”ì¼ (max-width: 768px) - ê³ ì • ë§ˆì§„/íŒ¨ë”© ì‚¬ìš© */
@media (max-width: 768px) {
  body, body.panel-open {
    padding-left: 0 !important;
  }
  #mini-lecture {
    top: 77px;
    left: 15px !important;
    right: 15px !important;
    width: auto !important;
    margin: 0 !important;
    padding-left: 0 !important;
  }
}

/* 2-4. ë“œë˜ê·¸ ì¤‘ ë³¸ë¬¸ ìŠ¤í¬ë¡¤ ë° ì„ íƒ ë°©ì§€ */
body.resizing { 
  user-select: none; 
  overflow: hidden;
}

/* ========================================= */
/* 3. ğŸ“ íŒ¨ë„ ë‚´ìš© ìš”ì†Œ */
/* ========================================= */

/* 3-1. íŒ¨ë„ ë‚´ìš© ì˜ì—­ (.panel-card) */
#mini-lecture .panel-card {
  background: #1a8b47f3;
  color: #ffffff;
  border: 1px solid #333;
  border-bottom: 0;
  box-shadow: 0 10px 30px rgba(0,0,0,.4);
  padding: 16px;
  overflow: auto; /* ìì²´ ìŠ¤í¬ë¡¤ */
  min-height: 0;
  overscroll-behavior: contain; /* ìŠ¤í¬ë¡¤ ì²´ì´ë‹ ë°©ì§€ */
  -webkit-overflow-scrolling: touch;
}

/* 3-2. ì œëª© ì»¤ë„¥í„° (.connector) */
#mini-lecture .connector {
  display: inline-block;
  margin-bottom: 8px;
  background: #000;
  color: #fff;
  border: 1px solid #333;
  border-bottom: 0;
  border-radius: 10px;
  padding: 4px 10px;
  font-size: 12px;
  font-weight: 700;
}

/* 3-3. ì¹© ìŠ¤íƒ€ì¼ (.chip) */
.chip {
  display: inline-block;
  margin-top: 8px;
  margin-right: 6px;
  background: #1a1a1a;
  color: #ddd;
  border: 1px solid #333;
  padding: 6px 10px;
  font-size: 12px;
}

/* ========================================= */
/* 4. ğŸšï¸ ë¦¬ì‚¬ì´ì € (#panel-resizer) */
/* ========================================= */

#panel-resizer {
  grid-row: 2; /* ê·¸ë¦¬ë“œ 2ë²ˆì§¸ í–‰ */
  height: 18px;
  border: 0;
  cursor: ns-resize;
  background: #313131;
  transition: background .15s ease, box-shadow .15s ease;
  position: relative;
  
  /* í„°ì¹˜ ë° ì‚¬ìš©ì ì„ íƒ ë°©ì§€ */
  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
  -webkit-tap-highlight-color: transparent;
}

/* 4-1. í¬ì¸í„°(í„°ì¹˜) í¬ê¸° í™•ëŒ€ */
@media (pointer: coarse) {
  #panel-resizer { 
    height: 18px;
  }
}

/* 4-2. ë¦¬ì‚¬ì´ì € í•¸ë“¤ (::before) */
#panel-resizer::before {
  content: "";
  position: absolute;
  left: 50%; top: 50%;
  transform: translate(-50%, -50%);
  width: 70px; height: 4px; border-radius: 999px;
  background: linear-gradient(90deg, #777, #aaa, #777);
  opacity: .9;
}

/* 4-3. ë„íŠ¸ íŒ¨í„´ (::after) */
#panel-resizer::after {
  content: "";
  position: absolute;
  left: 50%; top: 50%;
  transform: translate(-50%, -50%);
  width: 70px; height: 20px;
  pointer-events: none;
  color: #666;
  opacity: .55;
  background: radial-gradient(currentColor 1px, transparent 2px) 0 50%/10px 8px repeat-x;
}

/* 4-4. í˜¸ë²„/í¬ì»¤ìŠ¤/ë“œë˜ê·¸ ìƒíƒœ ìŠ¤íƒ€ì¼ */
#panel-resizer:hover,
#panel-resizer:focus-visible,
body.resizing #panel-resizer {
  background: #181818;
  box-shadow: inset 0 0 0 1px #444, 0 0 0 2px rgba(255,255,255,.05);
}

#panel-resizer:hover::before,
#panel-resizer:focus-visible::before {
  transform: translate(-50%, -50%) scaleX(1.08);
}

/* 4-5. ì‘ì€ ëª¨ë°”ì¼ ë†’ì´ ì¬í™•ì¸ */
@media (max-width: 640px) {
  #mini-lecture { height: var(--panel-h); min-height: 20px; }
}
</style>

<div id="mini-lecture" role="region" aria-label="ë¯¸ë‹ˆ ê°•ì˜ íŒ¨ë„">
  <div class="panel-card">
    <span class="connector" id="panel-title-connector">Welcome</span>
     
    <% if (panelData && panelData.html) { %>
      <div class="panel-body"><%- panelData.html %></div>
    <% } else { %>
      <h3 style="margin:0 0 0 0"><%= panelData.title %></h3>
      <p style="margin:0;opacity:.9"><%- panelData.body %></p>
    <% } %>
  </div>

  <div id="panel-resizer"
       role="separator"
       aria-orientation="horizontal"
       aria-label="íŒ¨ë„ ë†’ì´ ì¡°ì ˆ"
       aria-valuemin="50"   
       aria-valuemax="800"
       aria-valuenow="150"
       tabindex="0"
       title="ë“œë˜ê·¸í•˜ê±°ë‚˜ â†‘/â†“ í‚¤ë¡œ ë†’ì´ ì¡°ì ˆ">
  </div>
</div>

<script>
/* ========================================= */
/* 1. ğŸ“ íŒ¨ë„ ë¦¬ì‚¬ì´ì € (ë†’ì´ ì¡°ì ˆ) ë¡œì§ */
/* ========================================= */
window.initPanelResizer = function() {
  const root = document.documentElement;
  const resizer = document.getElementById('panel-resizer');
  if (!resizer) return;

  // ê¸°ì¡´ ë¦¬ìŠ¤ë„ˆ ì œê±° (ì¬í˜¸ì¶œ ì‹œ ì¤‘ë³µ ë°”ì¸ë”© ë°©ì§€)
  if (resizer.__bound_cleanup) {
    resizer.__bound_cleanup();
    delete resizer.__bound_cleanup;
  }

  // ìƒìˆ˜ ì •ì˜
  const MIN_HEIGHT = 35; // ğŸŒŸ ìµœì†Œ ë†’ì´
  const MAX_RATIO = 0.75; // ğŸŒŸ ìµœëŒ€ ë†’ì´: í™”ë©´ ë†’ì´ì˜ 75%
  // const MOBILE_DEFAULT_RATIO = 0.24; // â›”ï¸ ë¹„ìœ¨ ìƒìˆ˜ ì œê±°
  const MOBILE_DEFAULT_HEIGHT = 130; // ğŸŒŸ ëª¨ë°”ì¼ ì´ˆê¸° ë†’ì´: 220pxë¡œ ê³ ì •
  const DESKTOP_DEFAULT_HEIGHT = 150; // ğŸŒŸ ë°ìŠ¤í¬íƒ‘ ì´ˆê¸° ë†’ì´: 150px
  
  const STEP = 16, BIG = 64; // í‚¤ë³´ë“œ ì¡°ì ˆ ë‹¨ìœ„
  const VAR = '--panel-h';    // CSS ë³€ìˆ˜ëª…
  const KEY = 'miniPanelH_session'; // sessionStorage í‚¤
  
  // í—¬í¼ í•¨ìˆ˜
  const isMobileView = () => window.innerWidth <= 768;
  
  const getHeaderHeight = () => {
      const headerH = getComputedStyle(root).getPropertyValue('--header-h').trim() || '30px';
      return parseInt(headerH, 10) || 30;
  };
  
  const getMaxHeight = () => {
      const headerH = getHeaderHeight();
      // í™”ë©´ ë†’ì´ì˜ 75%ì—ì„œ í—¤ë” ë†’ì´ë¥¼ ëº€ ê°’
      return Math.floor(window.innerHeight * MAX_RATIO) - headerH; 
  };

  const getMinHeight = () => {
      return MIN_HEIGHT;
  };

  const getDefaultPx = () => {
    // const headerH = getHeaderHeight(); // í”½ì…€ ê³ ì •ê°’ì„ ì‚¬ìš©í•˜ë¯€ë¡œ í—¤ë” ë†’ì´ ì œì™¸ ê³„ì‚° ë¶ˆí•„ìš”
    if (isMobileView()) {
        // ğŸŒŸ ëª¨ë°”ì¼: 220px ê³ ì •
        return MOBILE_DEFAULT_HEIGHT;
    } else {
        // ğŸŒŸ ë°ìŠ¤í¬íƒ‘: 150px ê³ ì •
        return DESKTOP_DEFAULT_HEIGHT;
    }
  };

  const clamp = v => {
      const min = getMinHeight();
      const max = getMaxHeight();
      return Math.max(min, Math.min(max, v | 0));
  };
  
  /** ë†’ì´ë¥¼ ì„¤ì •í•˜ê³  í•„ìš” ì‹œ ì„¸ì…˜ì— ì €ì¥ */
  const setH = (h, save = false) => {
    const n = clamp(parseInt(h, 10));
    root.style.setProperty(VAR, n + 'px');
    resizer.setAttribute('aria-valuenow', String(n));
    // aria-valuemin, aria-valuemax ë™ì  ì—…ë°ì´íŠ¸ (ì ‘ê·¼ì„±)
    resizer.setAttribute('aria-valuemin', String(getMinHeight()));
    resizer.setAttribute('aria-valuemax', String(getMaxHeight()));
    
    if (save) sessionStorage.setItem(KEY, n + 'px');
    window.dispatchEvent(new CustomEvent('mini-panel-resized', { detail: { height: n }}));
  };
  
  const isHomePath = (p) => p === '/' || /^\/(ko|en|fr|zh|ja|es)\/?$/.test(p);

  // ì´ˆê¸°í™” (ì„¸ì…˜/í™ˆ ê²½ë¡œ ì²˜ë¦¬)
  (function init() {
    // ğŸŒŸ aria-valuemax ì´ˆê¸°ê°’ ì„¤ì • (ì •í™•í•œ ê³„ì‚°ì„ ìœ„í•´ DOMContentLoaded ì‹œì  í™œìš©)
    resizer.setAttribute('aria-valuemax', String(getMaxHeight()));
    resizer.setAttribute('aria-valuemin', String(getMinHeight()));
    
    // CSS ë³€ìˆ˜ `--panel-h-default`ë¥¼ JSì—ì„œ ê³„ì‚°í•œ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸ 
    const initialDefaultH = getDefaultPx();
    root.style.setProperty('--panel-h-default', initialDefaultH + 'px');
      
    if (isHomePath(location.pathname)) {
      sessionStorage.removeItem(KEY);
      root.style.removeProperty(VAR);
      resizer.setAttribute('aria-valuenow', String(initialDefaultH));
    } else {
      const saved = sessionStorage.getItem(KEY);
      if (saved) setH(saved, false);
      else setH(initialDefaultH, false); // ì´ˆê¸°ê°’ ì„¤ì • ë³´ì¥
    }
  })();
  
  // ë“œë˜ê·¸ ìƒíƒœ ë³€ìˆ˜
  let startY = 0, startH = 0, dragging = false, pid = null;

  /* ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ */
  const onPointerDown = (e) => {
    e.preventDefault();
    dragging = true;
    pid = e.pointerId;
    resizer.setPointerCapture?.(pid); 
    document.body.classList.add('resizing');
    startY = e.clientY;
    startH = parseInt(getComputedStyle(root).getPropertyValue(VAR), 10) || getDefaultPx();
  };

  const onPointerMove = (e) => {
    if (!dragging || (pid != null && e.pointerId != null && e.pointerId !== pid)) return;
    
    const h = startH + (e.clientY - startY);
    setH(h);
  };

  const endDrag = () => {
    if (!dragging) return;
    dragging = false;
    try { resizer.releasePointerCapture?.(pid); } catch (e) {}
    pid = null;
    document.body.classList.remove('resizing');
    const cur = parseInt(getComputedStyle(root).getPropertyValue(VAR), 10) || getDefaultPx();
    setH(cur, true); // ìµœì¢… ë†’ì´ ì €ì¥
  };
  
  const onKeyDown = (e) => {
    let delta = 0;
    if      (e.key === 'ArrowUp')   delta = -STEP;
    else if (e.key === 'ArrowDown') delta =  STEP;
    else if (e.key === 'PageUp')    delta = -BIG;
    else if (e.key === 'PageDown')  delta =  BIG;

    if (delta !== 0) {
      e.preventDefault();
      const cur = parseInt(getComputedStyle(root).getPropertyValue(VAR), 10) || getDefaultPx();
      setH(cur + delta, true);
    }
  };
  
  // ğŸŒŸ í™”ë©´ ë¦¬ì‚¬ì´ì¦ˆ ì‹œ MaxHeight ì¬ê³„ì‚° ë° í˜„ì¬ ë†’ì´ ì¬ì¡°ì •
  const handleResize = () => {
      // ë¦¬ì‚¬ì´ì¦ˆ ì‹œ ë°ìŠ¤í¬íƒ‘/ëª¨ë°”ì¼ ì „í™˜ì„ ê°ì§€í•˜ì—¬ ê¸°ë³¸ ë†’ì´ ë° ì œí•œ ì¬ì¡°ì •
      const currentH = parseInt(getComputedStyle(root).getPropertyValue(VAR), 10);
      const newDefaultH = getDefaultPx();
      
      // ì €ì¥ëœ ê°’ì´ ì—†ìœ¼ë©´ ìƒˆë¡œìš´ ê¸°ë³¸ê°’ì„ ì‚¬ìš©
      const saved = sessionStorage.getItem(KEY);
      if (!saved) {
          setH(newDefaultH, false);
      } else {
          // ì €ì¥ëœ ê°’ì´ ìˆìœ¼ë©´, Max/Min ì œí•œì— ë§ì¶° í˜„ì¬ ë†’ì´ë¥¼ ì¬ì¡°ì •
          setH(currentH, true); 
      }
      root.style.setProperty('--panel-h-default', newDefaultH + 'px');
  };

  window.addEventListener('resize', handleResize);


  /* ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ */
  resizer.addEventListener('pointerdown', onPointerDown);
  // documentì— move/up/cancelì„ ê±¸ì–´ íŒ¨ë„ ë°–ìœ¼ë¡œ ë‚˜ê°€ë„ ë“œë˜ê·¸ ìœ ì§€
  document.addEventListener('pointermove', onPointerMove); 
  document.addEventListener('pointerup', endDrag);
  document.addEventListener('pointercancel', endDrag);
  resizer.addEventListener('keydown', onKeyDown); 

  // ì •ë¦¬ í•¨ìˆ˜ ì €ì¥
  resizer.__bound_cleanup = () => {
    resizer.removeEventListener('pointerdown', onPointerDown);
    document.removeEventListener('pointermove', onPointerMove);
    document.removeEventListener('pointerup', endDrag);
    document.removeEventListener('pointercancel', endDrag);
    resizer.removeEventListener('keydown', onKeyDown);
    window.removeEventListener('resize', handleResize);
  };
};

window.initPanelResizer(); // ìµœì´ˆ ì‹¤í–‰

/* ========================================= */
/* 2. ğŸ–±ï¸ íŒ¨ë„ ìŠ¤í¬ë¡¤ ìº¡ì²˜ (ìŠ¤í¬ë¡¤ ì²´ì´ë‹ ë°©ì§€) ë¡œì§ */
/* ========================================= */
(function() {
  window.bindPanelScrollTrap = bind; // ì „ì—­ì— í•¨ìˆ˜ ë…¸ì¶œ

  let scroller, panel;
  let touchY = 0;
  
  function ref() {
    panel = document.getElementById('mini-lecture');
    scroller = panel?.querySelector('.panel-card') || null;
  }
  
  // íœ  ì´ë²¤íŠ¸
  function onPanelWheel(e) {
    if (document.body.classList.contains('resizing') || !scroller) return;
    e.preventDefault();
    e.stopPropagation(); // ìƒìœ„ ìš”ì†Œ ìŠ¤í¬ë¡¤ ì°¨ë‹¨
    scroller.scrollTop += e.deltaY;
    scroller.scrollLeft += e.deltaX || 0;
  }
  
  // í„°ì¹˜ ì‹œì‘
  function onPanelTouchStart(e) {
    if (document.body.classList.contains('resizing') || !scroller) return;
    touchY = e.touches[0].clientY;
  }
  
  // í„°ì¹˜ ì´ë™
  function onPanelTouchMove(e) {
    if (document.body.classList.contains('resizing') || !scroller) return;
    const y = e.touches[0].clientY;
    const delta = touchY - y;
    touchY = y;
    e.preventDefault();
    e.stopPropagation(); // ìƒìœ„ ìš”ì†Œ ìŠ¤í¬ë¡¤ ì°¨ë‹¨
    scroller.scrollTop += delta;
  }
  
  /** ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë°”ì¸ë”© */
  function bind() {
    ref();
    if (!panel || !scroller) return;
  
    // íœ /í„°ì¹˜ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ (capture:trueë¡œ ì´ë²¤íŠ¸ ìº¡ì²˜ë§)
    panel.addEventListener('wheel', onPanelWheel, { passive: false, capture: true });
    panel.addEventListener('touchstart', onPanelTouchStart, { passive: true, capture: true });
    panel.addEventListener('touchmove', onPanelTouchMove, { passive: false, capture: true });
  
    // ë‚´ìš© êµì²´ ê°ì§€ â†’ ì¬ë°”ì¸ë”©
    const mo = new MutationObserver(() => {
      const cur = panel.querySelector('.panel-card');
      if (cur !== scroller) { unbind(); bind(); }
    });
    mo.observe(panel, { childList: true, subtree: true });
  
    // ë¦¬ì‚¬ì´ì¦ˆ/ë¼ìš°íŒ… ë°œìƒ ì‹œ ì¬ë°”ì¸ë”©
    const reb = () => { unbind(); bind(); };
    window.addEventListener('mini-panel-resized', reb);
    window.addEventListener('resize', reb);
    
    // history API ë®ì–´ì“°ê¸° (ë¼ìš°íŒ… ê°ì§€)
    const _ps = history.pushState, _rs = history.replaceState;
    history.pushState = function() { const r = _ps.apply(this, arguments); setTimeout(reb, 0); return r; };
    history.replaceState = function() { const r = _rs.apply(this, arguments); setTimeout(reb, 0); return r; };
    window.addEventListener('popstate', () => setTimeout(reb, 0));
  
    // ì •ë¦¬ í•¨ìˆ˜
    panel.__trap_cleanup = () => {
      try {
        panel.removeEventListener('wheel', onPanelWheel, { capture: true });
        panel.removeEventListener('touchstart', onPanelTouchStart, { capture: true });
        panel.removeEventListener('touchmove', onPanelTouchMove, { capture: true });
        mo.disconnect();
        window.removeEventListener('mini-panel-resized', reb);
        window.removeEventListener('resize', reb);
      } catch (e) {}
    };
  }
  
  /** ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì–¸ë°”ì¸ë”© */
  function unbind() {
    if (panel?.__trap_cleanup) panel.__trap_cleanup();
    panel = scroller = null;
  }
  
  // DOM ë¡œë“œ ì™„ë£Œ ì‹œ ì‹¤í–‰
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', bind, { once: true });
  } else {
    bind();
  }
})();


/* ========================================= */
/* 3. ğŸŒ íŒ¨ë„ ë¡œë”© (AJAX) ë° ì œëª© ì—…ë°ì´íŠ¸ ë¡œì§ */
/* ========================================= */
document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('[data-panel-link]').forEach(link => {
    link.addEventListener('click', async (e) => {
      e.preventDefault();
      
      const url = link.getAttribute('href');
      // 1. í´ë¦­ëœ ë©”ë‰´ì˜ í…ìŠ¤íŠ¸ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. (ì œëª© ì—…ë°ì´íŠ¸ìš©)
      const menuText = link.textContent.trim(); 
      
      try {
        const res = await fetch(url + '?partial=1', { headers: { 'X-Requested-With': 'XMLHttpRequest' }});
        const html = await res.text();
        const panel = document.querySelector('#mini-lecture');

        if (panel) {
          // 2. íŒ¨ë„ ì½˜í…ì¸ ë¥¼ ì‚½ì…í•©ë‹ˆë‹¤. (EJS í…œí”Œë¦¿ì˜ ë‚´ìš©ì´ ë¡œë“œë¨)
          panel.innerHTML = html; 
          
          // 3. ì‚½ì… í›„, ì €ì¥í•´ë‘” ë©”ë‰´ ì´ë¦„ìœ¼ë¡œ ì œëª©ì„ **ë‹¤ì‹œ** ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
          const titleConnector = document.getElementById('panel-title-connector');
          if (titleConnector) {
             titleConnector.textContent = menuText;
          }

          panel.scrollTo(0, 0);
          // ë¦¬ì‚¬ì´ì €ì™€ ìŠ¤í¬ë¡¤ íŠ¸ë© ì¬ì´ˆê¸°í™”
          if (typeof window.initPanelResizer === 'function') window.initPanelResizer();
          if (typeof window.bindPanelScrollTrap === 'function') window.bindPanelScrollTrap();
        }
      } catch (err) {
        console.error('íŒ¨ë„ ë¡œë“œ ì˜¤ë¥˜:', err);
      }
    });
  });
});
</script>