<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>안전한 JS 미리보기</title>
  <style>
    body {
      font-family: 'Pretendard', sans-serif;
      background: #1e1e1e;
      color: white;
      margin: 0;
      padding: 0;
    }

    .tabs {
      display: flex;
      background: #333;
      border-bottom: 1px solid #444;
    }

    .tab {
      flex: 1;
      padding: 12px;
      text-align: center;
      cursor: pointer;
      background: #333;
      border: none;
      color: #ccc;
      font-weight: 500;
    }

    .tab.active {
      background: #222;
      color: #00f5d4;
    }

    .editor {
      display: none;
      width: 100%;
      height: 200px;
    }

    .editor.active {
      display: block;
    }

    textarea {
      width: 100%;
      height: 100%;
      background: #111;
      color: #0ff;
      border: none;
      padding: 12px;
      font-family: monospace;
      font-size: 14px;
      resize: none;
      outline: none;
    }

    iframe {
      width: 100%;
      height: 400px;
      border: none;
      margin-top: 10px;
      background: white;
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <div class="tabs">
    <button class="tab active" data-tab="html">HTML</button>
    <button class="tab" data-tab="css">CSS</button>
    <button class="tab" data-tab="js">JS</button>
  </div>

  <div id="html" class="editor active">
    <textarea id="html-code">
<h1>Hello World!</h1>
<p>자바스크립트는 iframe 안에서만 실행돼요!</p>
    </textarea>
  </div>

  <div id="css" class="editor">
    <textarea id="css-code">
body {
  background: #fff;
  color: #222;
  font-family: sans-serif;
  text-align: center;
  padding-top: 50px;
}
h1 {
  color: #00f5d4;
}
    </textarea>
  </div>

  <div id="js" class="editor">
    <textarea id="js-code">
// 이 코드는 iframe 안에서만 실행됩니다.
document.body.style.transform = 'scale(1.02)';
    </textarea>
  </div>

  <iframe id="preview" sandbox="allow-scripts"></iframe>

  <script>
    const tabs = document.querySelectorAll('.tab');
    const editors = document.querySelectorAll('.editor');
    const htmlInput = document.getElementById('html-code');
    const cssInput = document.getElementById('css-code');
    const jsInput = document.getElementById('js-code');
    const preview = document.getElementById('preview');

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        tabs.forEach(t => t.classList.remove('active'));
        editors.forEach(e => e.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById(tab.dataset.tab).classList.add('active');
      });
    });

    function updatePreview() {
      const html = htmlInput.value;
      const css = `<style>${cssInput.value}</style>`;
      const js = `<script>${jsInput.value}<\/script>`;
      const fullDoc = `${html}\n${css}\n${js}`;
      preview.srcdoc = fullDoc;
    }

    htmlInput.addEventListener('input', updatePreview);
    cssInput.addEventListener('input', updatePreview);
    jsInput.addEventListener('input', updatePreview);
    window.addEventListener('DOMContentLoaded', updatePreview);
  </script>
</body>
</html>
