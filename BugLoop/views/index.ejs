<!DOCTYPE html>
<html class="dark" lang="<%= lang %>">
  <%- include('partials/head') %>
  <link rel="stylesheet" href="/assets/css/index.css" />

  <body class="light">
    <%- include('partials/header') %>

    <div id="preloader">
      <div class="spinner"></div>
    </div>

    <div class="full-layout">
      <div class="main-layout">
        <div class="main-panel">

          <!-- âœ… ì½”ë“œ ì—ë””í„° -->
          <section class="editor-section">
            <h2>âœï¸ HTML/CSS ì½”ë“œ ì…ë ¥</h2>
            <textarea id="code-input" placeholder="ì—¬ê¸°ì— HTMLê³¼ CSS ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”. ì˜ˆ: <style>...</style> + <div>...</div>"></textarea>
          </section>

          <!-- âœ… ì½”ë“œ ë¯¸ë¦¬ë³´ê¸° -->
          <section class="preview-section">
            <h2>ğŸ” ë¯¸ë¦¬ë³´ê¸°</h2>
            <iframe id="code-preview" sandbox="allow-same-origin allow-scripts" frameborder="0"></iframe>
          </section>

        </div>
      </div>
    </div>

    <%- include('partials/scripts') %>

    <style>
      .editor-section, .preview-section {
        width: 90%;
        max-width: 1000px;
        margin: 40px auto;
        z-index: 10;
        position: relative;
      }

      .editor-section textarea {
        width: 100%;
        height: 300px;
        padding: 15px;
        font-family: monospace;
        font-size: 0.95rem;
        background: #1e1e1e;
        color: #f8f8f2;
        border: 1px solid #444;
        border-radius: 10px;
        resize: vertical;
      }

      .preview-section iframe {
        width: 100%;
        height: 400px;
        border: 1px solid #999;
        border-radius: 10px;
        background: white;
      }

      /* ìº”ë²„ìŠ¤ê°€ ì…ë ¥ì°½ ìœ„ë¡œ ì˜¬ë¼ì˜¤ì§€ ëª»í•˜ê²Œ í•¨ */
      #matrix-canvas {
        z-index: -1 !important;
        pointer-events: none;
      }
    </style>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const textarea = document.getElementById('code-input');
        const preview = document.getElementById('code-preview');

        textarea.addEventListener('input', () => {
          const content = textarea.value;
          const doc = `
            <!DOCTYPE html>
            <html>
              <head><meta charset="UTF-8"></head>
              <body>${content}</body>
            </html>
          `;
          preview.srcdoc = doc;
        });
      });
    </script>
  </body>
</html>
