<!DOCTYPE html>
<html lang="<%= lang %>">
<head>
  <%- include('partials/head') %>
  <link rel="stylesheet" href="/assets/css/index.css" />
</head>

<body>
  <div id="preloader"><div class="spinner"></div></div>
  <%- include('partials/header') %>

  <div id="panel-root" data-pjax-scope>
    <%- include('partials/panel') %>
  </div>

  <div class="app-shell">

    <!-- ===============================
         ì±… ì„¹ì…˜ (SSR ê·¸ëŒ€ë¡œ ìœ ì§€)
    =============================== -->
    <div class="section-title-wrapper">
      <h1 class="section-title"><%= locale.index.ongoing %></h1>
    </div>

    <div class="carousel">
      <!-- ðŸ“š book-card ë“¤ -->
      <!-- âš ï¸ ê¸°ì¡´ book-card SSR ì½”ë“œ ê·¸ëŒ€ë¡œ ë“¤ì–´ê°€ë©´ ë¨ -->
      <!-- âš ï¸ onclick="changePage(...)" ëŠ” ìœ ì§€ -->
    </div>

    <!-- ===============================
         ìµœê·¼ ê²Œì‹œë¬¼ (SSR)
    =============================== -->
    <div class="recent-posts-wrapper section-title-wrapper">
      <h2 class="section-title">
        <%= locale.index.recentPosts || "ìµœê·¼ ê²Œì‹œë¬¼" %>
      </h2>
    </div>

    <div class="recent-posts" id="posts-container">
      <% posts.slice(0, 5).forEach(post => { %>
        <!-- ðŸ”¹ ê¸°ì¡´ SSR ê²Œì‹œë¬¼ ë§ˆí¬ì—… ê·¸ëŒ€ë¡œ -->
      <% }) %>
    </div>

    <button id="load-more-btn" onclick="loadMorePosts()">
      <%= locale.index.loadMore || "ë”ë³´ê¸°" %>
    </button>

  </div>

  <footer class="app-footer">
    Â© 2025 Bug Loop
  </footer>

  <!-- ===============================
       JS ë°ì´í„° ì£¼ìž… (ðŸ”¥ í•µì‹¬)
  =============================== -->
  <script>
    window.booksData = <%- JSON.stringify(locale.books) %>;
    window.lang = "<%= lang %>";
  </script>

  <!-- ===============================
       íŽ˜ì´ì§€ ì „ìš© JS
       (ë°ì´í„° â†’ ê¸°ëŠ¥ â†’ ê³µí†µ)
  =============================== -->
  <script src="/assets/js/books.js" defer></script>
  <script src="/assets/js/posts.js" defer></script>
  <script src="/assets/js/index.js" defer></script>

  <!-- ===============================
       ê³µí†µ ìŠ¤í¬ë¦½íŠ¸
  =============================== -->
  <%- include('partials/scripts') %>

</body>
</html>
